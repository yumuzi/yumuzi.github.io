<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yinkit Lee</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yumuzi.github.io/"/>
  <updated>2016-12-13T05:34:09.000Z</updated>
  <id>https://yumuzi.github.io/</id>
  
  <author>
    <name>Yinkit Lee</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>决策树与R语言</title>
    <link href="https://yumuzi.github.io/decisionTreeR/"/>
    <id>https://yumuzi.github.io/decisionTreeR/</id>
    <published>2016-12-12T15:20:05.000Z</published>
    <updated>2016-12-13T05:34:09.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><ul><li><a href="http://www.cnblogs.com/jpld/p/4868761.html" target="_blank" rel="external">【R语言进行数据挖掘】决策树和随机森林</a></li></ul><h1 id="使用包party"><a href="#使用包party" class="headerlink" title="使用包party"></a>使用包<code>party</code></h1><ul><li>学习使用包<code>party</code>里的函数<code>ctree()</code>为数据集iris建立一个决策树；</li><li>四个属性：<br>(1) 属性<code>Sepal.Length</code>：萼片长度<br>(2) 属性<code>Sepal.Width</code>：萼片宽度<br>(3) 属性<code>Petal.Length</code>：花瓣长度<br>(4) 属性<code>Petal.Width</code>：花瓣宽度</li><li>上述四个属性被用来预测鸢(yuan1)尾花的<code>Species</code>（种类）；</li><li>在这个包里，函数<code>ctree()</code>建立了一个决策树，函数<code>predict()</code>预测了另外一个数据集；</li><li>在建立模型之前，iris（鸢尾花）数据集被分成两个子集：训练集（70%）和测试集（30%）。使用随机种子设置固定的随机数，可以使得随机选取的数据是可重复利用的；</li></ul><hr><a id="more"></a><ul><li>观察数据集的结构</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; str(iris)</div><div class="line"></div><div class="line"><span class="string">'data.frame'</span>:    <span class="number">150</span> obs. of  <span class="number">5</span> variables:</div><div class="line"> $ Sepal.Length: num  <span class="number">5.1</span> <span class="number">4.9</span> <span class="number">4.7</span> <span class="number">4.6</span> <span class="number">5</span> <span class="number">5.4</span> <span class="number">4.6</span> <span class="number">5</span> <span class="number">4.4</span> <span class="number">4.9</span> <span class="keyword">...</span></div><div class="line"> $ Sepal.Width : num  <span class="number">3.5</span> <span class="number">3</span> <span class="number">3.2</span> <span class="number">3.1</span> <span class="number">3.6</span> <span class="number">3.9</span> <span class="number">3.4</span> <span class="number">3.4</span> <span class="number">2.9</span> <span class="number">3.1</span> <span class="keyword">...</span></div><div class="line"> $ Petal.Length: num  <span class="number">1.4</span> <span class="number">1.4</span> <span class="number">1.3</span> <span class="number">1.5</span> <span class="number">1.4</span> <span class="number">1.7</span> <span class="number">1.4</span> <span class="number">1.5</span> <span class="number">1.4</span> <span class="number">1.5</span> <span class="keyword">...</span></div><div class="line"> $ Petal.Width : num  <span class="number">0.2</span> <span class="number">0.2</span> <span class="number">0.2</span> <span class="number">0.2</span> <span class="number">0.2</span> <span class="number">0.4</span> <span class="number">0.3</span> <span class="number">0.2</span> <span class="number">0.2</span> <span class="number">0.1</span> <span class="keyword">...</span></div><div class="line"> $ Species     : Factor w/ <span class="number">3</span> levels <span class="string">"setosa"</span>,<span class="string">"versicolor"</span>,..: <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="keyword">...</span></div></pre></td></tr></table></figure><ul><li>设置随机数起点</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; set.seed(<span class="number">1234</span>)</div></pre></td></tr></table></figure><ul><li>使用<code>sample()</code>函数抽取样本</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; ind &lt;- sample(<span class="number">2</span>,nrow(iris),replace=<span class="literal">TRUE</span>,prob = c(<span class="number">0.7</span>,<span class="number">0.3</span>))</div></pre></td></tr></table></figure><ul><li>训练集 &amp; 测试集</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; trainData &lt;- iris[ind == <span class="number">1</span>,]</div><div class="line">&gt; testData &lt;- iris[ind == <span class="number">2</span>,]</div></pre></td></tr></table></figure><ul><li>（安装并）加载包</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt; install.packages(<span class="string">"party"</span>)  <span class="comment"># 可能需要执行两遍</span></div><div class="line"></div><div class="line">&gt; <span class="keyword">library</span>(grid)</div><div class="line">&gt; <span class="keyword">library</span>(mvtnorm)</div><div class="line">&gt; <span class="keyword">library</span>(stats4)</div><div class="line">&gt; <span class="keyword">library</span>(modeltools)</div><div class="line">&gt; <span class="keyword">library</span>(zoo)</div><div class="line">&gt; <span class="keyword">library</span>(strucchange)</div><div class="line">&gt; <span class="keyword">library</span>(sandwich)</div><div class="line">&gt; <span class="keyword">library</span>(party)</div></pre></td></tr></table></figure><ul><li>设置决策树的目标变量和独立变量</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 符号‘~’是连接方程或公式左右两边的符号</span></div><div class="line">&gt; myFormula &lt;- Species ~ Sepal.Length + Sepal.Width + Petal.Length + Petal.Width</div></pre></td></tr></table></figure><ul><li>建立决策树</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; iris_ctree &lt;- ctree(myFormula, data=trainData)</div></pre></td></tr></table></figure><ul><li>查看训练结果</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; table(predict(iris_ctree),trainData$Species)</div><div class="line"></div><div class="line">             setosa versicolor virginica</div><div class="line">  setosa         <span class="number">40</span>          <span class="number">0</span>         <span class="number">0</span></div><div class="line">  versicolor      <span class="number">0</span>         <span class="number">37</span>         <span class="number">3</span></div><div class="line">  virginica       <span class="number">0</span>          <span class="number">1</span>        <span class="number">31</span></div></pre></td></tr></table></figure><ul><li>打印决策树</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&gt; print(iris_ctree)</div><div class="line"></div><div class="line">     Conditional inference tree with <span class="number">4</span> terminal nodes</div><div class="line"></div><div class="line">Response:  Species </div><div class="line">Inputs:  Sepal.Length, Sepal.Width, Petal.Length, Petal.Width </div><div class="line">Number of observations:  <span class="number">112</span> </div><div class="line"></div><div class="line"><span class="number">1</span>) Petal.Length &lt;= <span class="number">1.9</span>; criterion = <span class="number">1</span>, statistic = <span class="number">104.643</span></div><div class="line">  <span class="number">2</span>)*  weights = <span class="number">40</span> </div><div class="line"><span class="number">1</span>) Petal.Length &gt; <span class="number">1.9</span></div><div class="line">  <span class="number">3</span>) Petal.Width &lt;= <span class="number">1.7</span>; criterion = <span class="number">1</span>, statistic = <span class="number">48.939</span></div><div class="line">    <span class="number">4</span>) Petal.Length &lt;= <span class="number">4.4</span>; criterion = <span class="number">0.974</span>, statistic = <span class="number">7.397</span></div><div class="line">      <span class="number">5</span>)*  weights = <span class="number">21</span> </div><div class="line">    <span class="number">4</span>) Petal.Length &gt; <span class="number">4.4</span></div><div class="line">      <span class="number">6</span>)*  weights = <span class="number">19</span> </div><div class="line">  <span class="number">3</span>) Petal.Width &gt; <span class="number">1.7</span></div><div class="line">    <span class="number">7</span>)*  weights = <span class="number">32</span></div></pre></td></tr></table></figure><ul><li>绘图</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span><span class="bash"> plot(iris_ctree)</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> plot(iris_ctree,<span class="built_in">type</span>=<span class="string">"simple"</span>)</span></div></pre></td></tr></table></figure><p><img src="https://github.com/yumuzi/images/raw/master/20161212_iris_dtc1.png" alt=""></p><p><img src="https://github.com/yumuzi/images/raw/master/20161212_iris_dtc2.png" alt=""></p><ul><li>在测试集上测试决策树模型</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; testPred &lt;- predict(iris_ctree, newdata = testData)</div><div class="line">&gt; table(testPred, testData$Species)</div><div class="line"></div><div class="line">testPred     setosa versicolor virginica</div><div class="line">  setosa         <span class="number">10</span>          <span class="number">0</span>         <span class="number">0</span></div><div class="line">  versicolor      <span class="number">0</span>         <span class="number">12</span>         <span class="number">2</span></div><div class="line">  virginica       <span class="number">0</span>          <span class="number">0</span>        <span class="number">14</span></div></pre></td></tr></table></figure><ul><li>代码汇总</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">str(iris)</div><div class="line">set.seed(<span class="number">1234</span>)</div><div class="line"></div><div class="line">ind &lt;- sample(<span class="number">2</span>,nrow(iris),replace=<span class="literal">TRUE</span>,prob = c(<span class="number">0.7</span>,<span class="number">0.3</span>))</div><div class="line">trainData &lt;- iris[ind == <span class="number">1</span>,]</div><div class="line">testData &lt;- iris[ind == <span class="number">2</span>,]</div><div class="line"></div><div class="line"><span class="keyword">library</span>(grid)</div><div class="line"><span class="keyword">library</span>(mvtnorm)</div><div class="line"><span class="keyword">library</span>(stats4)</div><div class="line"><span class="keyword">library</span>(modeltools)</div><div class="line"><span class="keyword">library</span>(zoo)</div><div class="line"><span class="keyword">library</span>(strucchange)</div><div class="line"><span class="keyword">library</span>(sandwich)</div><div class="line"><span class="keyword">library</span>(party)</div><div class="line"></div><div class="line">myFormula &lt;- Species ~ Sepal.Length + Sepal.Width + Petal.Length + Petal.Width</div><div class="line">iris_ctree &lt;- ctree(myFormula, data=trainData)</div><div class="line"></div><div class="line">table(predict(iris_ctree),trainData$Species)</div><div class="line"></div><div class="line">print(iris_ctree)</div><div class="line">plot(iris_ctree)</div><div class="line">plot(iris_ctree,type=<span class="string">"simple"</span>)</div><div class="line"></div><div class="line">testPred &lt;- predict(iris_ctree, newdata = testData)</div><div class="line">table(testPred, testData$Species)</div></pre></td></tr></table></figure><h1 id="使用包rpart"><a href="#使用包rpart" class="headerlink" title="使用包rpart"></a>使用包<code>rpart</code></h1><ul><li>在<code>bodyfat</code>这个数据集基础上建立决策树；</li><li>函数<code>rpart()</code>可以建立一个决策树，并且可以选择最小误差的预测；</li><li>利用该决策树使用<code>predict()</code>函数预测另外一个数据集；</li></ul><hr><ul><li>加载<code>bodyfat</code>数据集，并查看它的一些属性</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; data(<span class="string">"bodyfat"</span>, package = <span class="string">"TH.data"</span>)</div><div class="line">&gt; dim(bodyfat)  <span class="comment"># 维度 a x b</span></div><div class="line"></div><div class="line">[<span class="number">1</span>] <span class="number">71</span> <span class="number">10</span></div></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&gt; attributes(bodyfat)</div><div class="line"></div><div class="line">$names</div><div class="line"> [<span class="number">1</span>] <span class="string">"age"</span>          <span class="string">"DEXfat"</span>       <span class="string">"waistcirc"</span>   </div><div class="line"> [<span class="number">4</span>] <span class="string">"hipcirc"</span>      <span class="string">"elbowbreadth"</span> <span class="string">"kneebreadth"</span> </div><div class="line"> [<span class="number">7</span>] <span class="string">"anthro3a"</span>     <span class="string">"anthro3b"</span>     <span class="string">"anthro3c"</span>    </div><div class="line">[<span class="number">10</span>] <span class="string">"anthro4"</span>     </div><div class="line"></div><div class="line">$row.names</div><div class="line"> [<span class="number">1</span>] <span class="string">"47"</span>  <span class="string">"48"</span>  <span class="string">"49"</span>  <span class="string">"50"</span>  <span class="string">"51"</span>  <span class="string">"52"</span>  <span class="string">"53"</span>  <span class="string">"54"</span>  <span class="string">"55"</span> </div><div class="line">[<span class="number">10</span>] <span class="string">"56"</span>  <span class="string">"57"</span>  <span class="string">"58"</span>  <span class="string">"59"</span>  <span class="string">"60"</span>  <span class="string">"61"</span>  <span class="string">"62"</span>  <span class="string">"63"</span>  <span class="string">"64"</span> </div><div class="line">[<span class="number">19</span>] <span class="string">"65"</span>  <span class="string">"66"</span>  <span class="string">"67"</span>  <span class="string">"68"</span>  <span class="string">"69"</span>  <span class="string">"70"</span>  <span class="string">"71"</span>  <span class="string">"72"</span>  <span class="string">"73"</span> </div><div class="line">[<span class="number">28</span>] <span class="string">"74"</span>  <span class="string">"75"</span>  <span class="string">"76"</span>  <span class="string">"77"</span>  <span class="string">"78"</span>  <span class="string">"79"</span>  <span class="string">"80"</span>  <span class="string">"81"</span>  <span class="string">"82"</span> </div><div class="line">[<span class="number">37</span>] <span class="string">"83"</span>  <span class="string">"84"</span>  <span class="string">"85"</span>  <span class="string">"86"</span>  <span class="string">"87"</span>  <span class="string">"88"</span>  <span class="string">"89"</span>  <span class="string">"90"</span>  <span class="string">"91"</span> </div><div class="line">[<span class="number">46</span>] <span class="string">"92"</span>  <span class="string">"93"</span>  <span class="string">"94"</span>  <span class="string">"95"</span>  <span class="string">"96"</span>  <span class="string">"97"</span>  <span class="string">"98"</span>  <span class="string">"99"</span>  <span class="string">"100"</span></div><div class="line">[<span class="number">55</span>] <span class="string">"101"</span> <span class="string">"102"</span> <span class="string">"103"</span> <span class="string">"104"</span> <span class="string">"105"</span> <span class="string">"106"</span> <span class="string">"107"</span> <span class="string">"108"</span> <span class="string">"109"</span></div><div class="line">[<span class="number">64</span>] <span class="string">"110"</span> <span class="string">"111"</span> <span class="string">"112"</span> <span class="string">"113"</span> <span class="string">"114"</span> <span class="string">"115"</span> <span class="string">"116"</span> <span class="string">"117"</span></div><div class="line"></div><div class="line">$class</div><div class="line">[<span class="number">1</span>] <span class="string">"data.frame"</span></div></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; body[<span class="number">1</span>:<span class="number">5</span>,]</div><div class="line"></div><div class="line">   age DEXfat waistcirc hipcirc elbowbreadth kneebreadth anthro3a anthro3b anthro3c anthro4</div><div class="line"><span class="number">47</span>  <span class="number">57</span>  <span class="number">41.68</span>     <span class="number">100.0</span>   <span class="number">112.0</span>          <span class="number">7.1</span>         <span class="number">9.4</span>     <span class="number">4.42</span>     <span class="number">4.95</span>     <span class="number">4.50</span>    <span class="number">6.13</span></div><div class="line"><span class="number">48</span>  <span class="number">65</span>  <span class="number">43.29</span>      <span class="number">99.5</span>   <span class="number">116.5</span>          <span class="number">6.5</span>         <span class="number">8.9</span>     <span class="number">4.63</span>     <span class="number">5.01</span>     <span class="number">4.48</span>    <span class="number">6.37</span></div><div class="line"><span class="number">49</span>  <span class="number">59</span>  <span class="number">35.41</span>      <span class="number">96.0</span>   <span class="number">108.5</span>          <span class="number">6.2</span>         <span class="number">8.9</span>     <span class="number">4.12</span>     <span class="number">4.74</span>     <span class="number">4.60</span>    <span class="number">5.82</span></div><div class="line"><span class="number">50</span>  <span class="number">58</span>  <span class="number">22.79</span>      <span class="number">72.0</span>    <span class="number">96.5</span>          <span class="number">6.1</span>         <span class="number">9.2</span>     <span class="number">4.03</span>     <span class="number">4.48</span>     <span class="number">3.91</span>    <span class="number">5.66</span></div><div class="line"><span class="number">51</span>  <span class="number">60</span>  <span class="number">36.42</span>      <span class="number">89.5</span>   <span class="number">100.5</span>          <span class="number">7.1</span>        <span class="number">10.0</span>     <span class="number">4.24</span>     <span class="number">4.68</span>     <span class="number">4.15</span>    <span class="number">5.91</span></div></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; set.seed(<span class="number">1234</span>)</div><div class="line">&gt; ind &lt;- sample(<span class="number">2</span>, nrow(bodyfat), replace = <span class="literal">TRUE</span>, prob = c(<span class="number">0.7</span>,<span class="number">0.3</span>))</div><div class="line">&gt; bodyfat.train &lt;- bodyfat[ind == <span class="number">1</span>,]</div><div class="line">&gt; bodyfat.test &lt;- bodyfat[ind == <span class="number">2</span>,]</div><div class="line">&gt; <span class="keyword">library</span>(rpart)</div></pre></td></tr></table></figure><ul><li>编写公式</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; myFormula &lt;- DEXfat ~ age + waistcirc + hipcirc + elbowbreadth + kneebreadth</div></pre></td></tr></table></figure><ul><li>训练决策树</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; bodyfat_rpart &lt;- rpart(myFormula, data = bodyfat.train, control = rpart.control(minsplit = <span class="number">10</span>))</div></pre></td></tr></table></figure><ul><li>绘制决策树</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="keyword">library</span>(rattle)</div><div class="line">&gt; <span class="keyword">library</span>(rpart.plot)</div><div class="line">&gt; <span class="keyword">library</span>(RColorBrewer)</div><div class="line">&gt; fancyRpartPlot(bodyfat_rpart)</div></pre></td></tr></table></figure><p><img src="https://github.com/yumuzi/images/raw/master/20161212_bodyfat_dtc1.png" alt=""></p><ul><li>选择预测误差最小值的预测树，从而优化模型</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; opt &lt;- which.min(bodyfat_rpart$cptable[,<span class="string">"xerror"</span>])</div><div class="line">&gt; cp &lt;- bodyfat_rpart$cptable[opt,<span class="string">"CP"</span>]</div><div class="line">&gt; bodyfat_prune &lt;- prune(bodyfat_rpart, cp = cp)</div><div class="line">&gt; fancyRpartPlot(bodyfat_prune)</div></pre></td></tr></table></figure><p><img src="https://github.com/yumuzi/images/raw/master/20161212_bodyfat_dtc2.png" alt=""></p><ul><li>在测试集上测试，并与实际值进行对比</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; DEXfat_pred &lt;- predict(bodyfat_prune, newdata = bodyfat.test)</div><div class="line">&gt; xlim &lt;- range(bodyfat$DEXfat)</div><div class="line">&gt; plot(DEXfat_pred ~ DEXfat, data = bodyfat.test, xlab = <span class="string">"Observed"</span>, ylab = <span class="string">"Predicted"</span>, ylim = xlim, xlim = xlim)</div><div class="line">&gt; abline(a = <span class="number">0</span>, b = <span class="number">1</span>)</div></pre></td></tr></table></figure><p><img src="https://github.com/yumuzi/images/raw/master/20161212_bodyfat_dtc3.png" alt=""></p><ul><li>代码汇总</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">data(<span class="string">"bodyfat"</span>, package = <span class="string">"TH.data"</span>)</div><div class="line">dim(bodyfat)</div><div class="line"></div><div class="line">attributes(bodyfat)</div><div class="line"></div><div class="line">body[<span class="number">1</span>:<span class="number">5</span>,]</div><div class="line"></div><div class="line">set.seed(<span class="number">1234</span>)</div><div class="line">ind &lt;- sample(<span class="number">2</span>, nrow(bodyfat), replace = <span class="literal">TRUE</span>, prob = c(<span class="number">0.7</span>,<span class="number">0.3</span>))</div><div class="line">bodyfat.train &lt;- bodyfat[ind == <span class="number">1</span>,]</div><div class="line">bodyfat.test &lt;- bodyfat[ind == <span class="number">2</span>,]</div><div class="line"><span class="keyword">library</span>(rpart)</div><div class="line"></div><div class="line">myFormula &lt;- DEXfat ~ age + waistcirc + hipcirc + elbowbreadth + kneebreadth</div><div class="line"></div><div class="line">bodyfat_rpart &lt;- rpart(myFormula, data = bodyfat.train, control = rpart.control(minsplit = <span class="number">10</span>))</div><div class="line"></div><div class="line"><span class="keyword">library</span>(rattle)</div><div class="line"><span class="keyword">library</span>(rpart.plot)</div><div class="line"><span class="keyword">library</span>(RColorBrewer)</div><div class="line">fancyRpartPlot(bodyfat_rpart)</div><div class="line"></div><div class="line">opt &lt;- which.min(bodyfat_rpart$cptable[,<span class="string">"xerror"</span>])</div><div class="line">cp &lt;- bodyfat_rpart$cptable[opt,<span class="string">"CP"</span>]</div><div class="line">bodyfat_prune &lt;- prune(bodyfat_rpart, cp = cp)</div><div class="line">fancyRpartPlot(bodyfat_prune)</div><div class="line"></div><div class="line">DEXfat_pred &lt;- predict(bodyfat_prune, newdata = bodyfat.test)</div><div class="line">xlim &lt;- range(bodyfat$DEXfat)</div><div class="line">plot(DEXfat_pred ~ DEXfat, data = bodyfat.test, xlab = <span class="string">"Observed"</span>, ylab = <span class="string">"Predicted"</span>, ylim = xlim, xlim = xlim)</div><div class="line">abline(a = <span class="number">0</span>, b = <span class="number">1</span>)</div></pre></td></tr></table></figure><h1 id="使用随机森林"><a href="#使用随机森林" class="headerlink" title="使用随机森林"></a>使用随机森林</h1><ul><li>这里使用包<code>randomForest</code>，并利用iris(鸢尾花)数据建立一个预测模型；</li><li>包里面的<code>randomForest()</code>函数有两点不足：第一，它不能处理缺失值，使得用户必须在使用该函数之前填补这些缺失值；第二，每个分类属性的最大数量不能超过32个，如果属性超过32个，那么在使用该函数之前那些属性必须被转化；</li><li>另外，也可以通过包<code>cforest</code>建立随机森林，并且该包里面的函数并不受属性的最大数量限制，尽管如此，高维的分类属性会使得它建立随机森林的时候消耗大量的内存和时间；</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; ind &lt;- sample(<span class="number">2</span>, nrow(iris), replace = <span class="literal">TRUE</span>, prob = c(<span class="number">0.7</span>, <span class="number">0.3</span>))</div><div class="line">&gt; trainData &lt;- iris[ind == <span class="number">1</span>,]</div><div class="line">&gt; testData &lt;- iris[ind == <span class="number">2</span>,]</div><div class="line">&gt; install.packages(<span class="string">"randomForest"</span>)</div><div class="line">&gt; <span class="keyword">library</span>(randomForest)</div><div class="line">&gt; myFormula &lt;- Species ~ .  <span class="comment"># 'Species ~ .'表示'Species'与其他所有属性之间的等式</span></div><div class="line">&gt; rf &lt;- randomForest(myFormula, data = trainData, ntree = <span class="number">100</span>, proximity = <span class="literal">TRUE</span>)</div><div class="line"></div><div class="line">             setosa versicolor virginica</div><div class="line">  setosa         <span class="number">36</span>          <span class="number">0</span>         <span class="number">0</span></div><div class="line">  versicolor      <span class="number">0</span>         <span class="number">31</span>         <span class="number">2</span></div><div class="line">  virginica       <span class="number">0</span>          <span class="number">1</span>        <span class="number">34</span></div></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt; print(rf)</div><div class="line"></div><div class="line">Call:</div><div class="line"> randomForest(formula = myFormula, data = trainData, ntree = <span class="number">100</span>,      proximity = <span class="literal">TRUE</span>) </div><div class="line">               Type of random forest: classification</div><div class="line">                     Number of trees: <span class="number">100</span></div><div class="line">No. of variables tried at each split: <span class="number">2</span></div><div class="line"></div><div class="line">        OOB estimate of  error rate: <span class="number">2.88</span>%</div><div class="line">Confusion matrix:</div><div class="line">           setosa versicolor virginica class.error</div><div class="line">setosa         <span class="number">36</span>          <span class="number">0</span>         <span class="number">0</span>  <span class="number">0.00000000</span></div><div class="line">versicolor      <span class="number">0</span>         <span class="number">31</span>         <span class="number">1</span>  <span class="number">0.03125000</span></div><div class="line">virginica       <span class="number">0</span>          <span class="number">2</span>        <span class="number">34</span>  <span class="number">0.05555556</span></div></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; irisPred &lt;- predict(rf, newdata = testData)</div><div class="line">&gt; table(irisPred, testData$Species)</div><div class="line"></div><div class="line">irisPred     setosa versicolor virginica</div><div class="line">  setosa         <span class="number">14</span>          <span class="number">0</span>         <span class="number">0</span></div><div class="line">  versicolor      <span class="number">0</span>         <span class="number">17</span>         <span class="number">3</span></div><div class="line">  virginica       <span class="number">0</span>          <span class="number">1</span>        <span class="number">11</span></div></pre></td></tr></table></figure><ul><li>绘制每一个观测值被判断正确的概率图</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; plot(margin(rf, testData$Species))</div></pre></td></tr></table></figure><p><img src="https://github.com/yumuzi/images/raw/master/20161212_randomForest.png" alt=""></p><ul><li>代码汇总</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">ind &lt;- sample(<span class="number">2</span>, nrow(iris), replace = <span class="literal">TRUE</span>, prob = c(<span class="number">0.7</span>, <span class="number">0.3</span>))</div><div class="line">trainData &lt;- iris[ind == <span class="number">1</span>,]</div><div class="line">testData &lt;- iris[ind == <span class="number">2</span>,]</div><div class="line"></div><div class="line">install.packages(<span class="string">"randomForest"</span>)</div><div class="line"><span class="keyword">library</span>(randomForest)</div><div class="line"></div><div class="line">myFormula &lt;- Species ~ .</div><div class="line">rf &lt;- randomForest(myFormula, data = trainData, ntree = <span class="number">100</span>, proximity = <span class="literal">TRUE</span>)</div><div class="line">table(predict(rf), trainData$Species)</div><div class="line"></div><div class="line">print(rf)</div><div class="line"></div><div class="line">irisPred &lt;- predict(rf, newdata = testData)</div><div class="line">table(irisPred, testData$Species)</div><div class="line"></div><div class="line">plot(margin(rf, testData$Species))</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/jpld/p/4868761.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;【R语言进行数据挖掘】决策树和随机森林&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;使用包party&quot;&gt;&lt;a href=&quot;#使用包party&quot; class=&quot;headerlink&quot; title=&quot;使用包party&quot;&gt;&lt;/a&gt;使用包&lt;code&gt;party&lt;/code&gt;&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;学习使用包&lt;code&gt;party&lt;/code&gt;里的函数&lt;code&gt;ctree()&lt;/code&gt;为数据集iris建立一个决策树；&lt;/li&gt;
&lt;li&gt;四个属性：&lt;br&gt;(1) 属性&lt;code&gt;Sepal.Length&lt;/code&gt;：萼片长度&lt;br&gt;(2) 属性&lt;code&gt;Sepal.Width&lt;/code&gt;：萼片宽度&lt;br&gt;(3) 属性&lt;code&gt;Petal.Length&lt;/code&gt;：花瓣长度&lt;br&gt;(4) 属性&lt;code&gt;Petal.Width&lt;/code&gt;：花瓣宽度&lt;/li&gt;
&lt;li&gt;上述四个属性被用来预测鸢(yuan1)尾花的&lt;code&gt;Species&lt;/code&gt;（种类）；&lt;/li&gt;
&lt;li&gt;在这个包里，函数&lt;code&gt;ctree()&lt;/code&gt;建立了一个决策树，函数&lt;code&gt;predict()&lt;/code&gt;预测了另外一个数据集；&lt;/li&gt;
&lt;li&gt;在建立模型之前，iris（鸢尾花）数据集被分成两个子集：训练集（70%）和测试集（30%）。使用随机种子设置固定的随机数，可以使得随机选取的数据是可重复利用的；&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="技术" scheme="https://yumuzi.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="MachineLearning" scheme="https://yumuzi.github.io/tags/MachineLearning/"/>
    
      <category term="R" scheme="https://yumuzi.github.io/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>冯友兰《中国哲学史》阅读摘录</title>
    <link href="https://yumuzi.github.io/fengyoulan/"/>
    <id>https://yumuzi.github.io/fengyoulan/</id>
    <published>2016-11-30T14:35:03.000Z</published>
    <updated>2016-11-30T14:47:10.000Z</updated>
    
    <content type="html"><![CDATA[<ol><li>其道甚微而易，其意甚幽而深。</li><li>内动外静，后发先至；全神贯注，反应迅捷；变化多端，出敌不意。</li><li>庾信的《宇文盛墓志》中有两句说：“授图黄石，不无师表之心，学剑白猿，遂得风云之志。”杜牧之有两句诗说：“授图黄石老，学剑白猿翁。</li><li>靡不有初，鲜克有终。</li><li>寡取易盈，好逞易穷，驽钝之材也。</li><li>为天地立心，为生民立命，为往圣继绝学，为万世开太平。</li><li>其持之有故，其言之成理。</li><li>西洋所谓哲学，与中国魏晋人所谓玄学，宋明人所谓道学，及清人所谓义理之学，其所研究之对象，颇可谓约略相当。</li><li>乃折枝之类，非挟泰山以超北海之类。<a id="more"></a></li><li>吾欲托之空言，不如见之行事之深切著名也。</li><li>太上有立德，其次有立功，其次有立言。</li><li>论其诗，读其书，不知其人可乎？是以论其世也。</li><li>人之相知，贵相知心。</li><li>书不尽言，言不尽意。</li><li>孟子云:尽信书则不如无书，吾于《武成9》，取二三策而已。</li><li>淮南被兵六年，士民转徙几尽。行密初至，赐与将吏，帛不过数尺，钱不过数百；而能以勤俭足用，非公宴，未尝举乐。招抚流散，轻徭薄敛，未及数年，公私富庶，几复承平之旧。</li><li>呜呼，盗亦有道，信哉！</li><li>皇帝问李勉道：“众人皆言卢杞奸邪，朕何不知？卿知其状乎？”对曰：“天下皆知其奸邪，独陛下不知，所以为奸邪也！”</li><li>夫好战必亡，失其故俗必亡，人心不服必亡，金皆有焉。</li><li>韩非子所谓: 孔子墨子俱道尧舜，而取舍不同，皆自谓真尧舜。尧舜不复生，谁将使定儒墨之诚乎？</li><li>普天之下，莫非王土；率土之滨，莫非王臣。</li><li>观乎天文，以察时变。</li><li>貌言视听思心失则五行之序乱。</li><li>天有五义，物质之天，主宰之天，运命之天，自然之天，义理之天。</li><li>《庄子·天下篇》讲及儒家，即说：“诗”以道志，“书”以道事，“礼”以道行，“乐”以道和，“易”以道阴阳，“春秋”以道名分。</li><li>仕而优则学，学而优则仕。</li><li>儒以文乱法，侠以武犯禁。</li><li>吾非生而知之者，好古敏以求之也。</li><li>述而不作，信而好古。</li><li>君子有三畏，畏天命，畏大人，畏圣人之言。</li><li>诗三百，一言以蔽之，曰：“思无邪。”</li><li>林放问礼之本，子曰：“大哉问，礼与其奢也宁俭，丧与其易也宁戚。”</li><li>礼之用，和为贵，先王之道斯为美。</li><li>不恒其德，或承之羞。</li><li>人而不仁如礼何，人而不仁如乐何！</li><li>君子义以为质，礼以行之，孙以出之，信以成之。</li><li>叶公语孔子曰：“吾党有直躬者，其父攘羊，而其子证之。”孔子曰：“吾党之直者异于是，父为子隐，子为父隐，直在其中矣。”</li><li>巧言令色足恭，左丘明耻之，丘亦耻之。</li><li>子贡问曰：“乡人皆好之，何如？”子曰：“未可也。”曰：“乡人皆恶之，何如？”子曰：“未可也。不如乡人之善者好之，其不善者恶之。”</li><li>子曰：“恭而无礼则劳，慎而无礼则葸，勇而无礼则乱，直而无礼则绞。”</li><li>子产谓：“夫礼，天之经也，地之义也，民之行也。”</li><li>颜渊所谓“博我以文，约我以礼。”</li><li>质胜文则野，文胜质则史，文质则史，文质彬彬，然后君子。</li><li>子曰：巧言令色，鲜矣仁。</li><li>子曰：刚毅木讷近仁。</li><li>樊迟问仁。子曰：爱人。</li><li>故克伐怨欲不行，苦心洁身之士孔子所不取。</li><li>人之过也，各于其党，观过斯知仁矣。</li><li>颜渊问仁，子曰：“克己复礼为仁。一日克己复礼，天下归仁焉。为仁由己，而由人乎哉?”颜渊曰:“请问其目。”子曰:“非礼勿视,非礼勿听,非礼勿言,非礼勿动。”</li><li>仲弓问仁。子曰:“出门如见大宾,使民如承大祭。己所不欲,勿施于人,在邦无怨,在家无怨。”仲弓曰:“雍虽不敏,请事斯语矣。”</li><li>子贡曰:“如有钱博施于民,而能济众,何如,可谓仁乎?”子曰:“何事于仁?必也圣乎!尧舜其犹病诸!夫仁者己欲立而立人,己欲达而达人,能近取譬,可为仁之方也矣。”</li><li>“因己之欲,推以知人之欲”,即“己欲立而立人,己欲达而达人”,即所谓忠也。“因己之不欲,推以知人之不欲”,即“己所不欲,勿施于人”,即所恕也。实行忠恕即实行仁。</li><li>子曰：“参乎，吾道一以贯之。”曾子曰：“唯！”子出，门人问曰：“何谓也？”曾子曰：“夫子之道忠恕而已矣。”</li><li>无求生以害仁，有杀身以成仁。</li><li>子张问仁于孔子，孔子曰：“能行五者于天下为仁矣。”请问之。曰：“恭，宽，信，敏，惠。恭则不侮，宽则得众，信则人任焉，敏则有功，惠则足以使人。”</li><li>子绝四：毋意，毋必，毋固，毋我。</li><li>君子之仕也，行其义也。道之不行也，已知之矣。</li><li>董仲舒谓：“正其谊不谋其利，明其道不计其功。”</li><li>君子喻于义，小人喻于利。</li><li>子墨子曰:“必去六辟,默则思,言则诲,动则事,使三者代御,必为圣人。必去喜,去怒,去乐,去悲,去爱,去恶,而用仁义。手足口鼻耳,从事于义,必为圣人。</li><li>国家人民之大害，在于国家人民之互相争斗，无有宁息；而其所以互相争斗之原因，则起于人之不相爱。</li><li>天下之大利，在于人之兼爱；天下之大害，在于人之互争；故吾人应非攻。</li><li>墨子以人性为素丝，其善恶全在“所染”。</li><li>边沁谓人之快乐苦痛，有四来源：即物质的，政治的，道德的，宗教的。</li><li>依析心术派之心理学所说，吾人诸欲中之最强者，乃系自私之欲及男女之欲。</li><li>故食必常饱，然后求美；衣必常暖，然后求丽；居必常安，然后求乐；为可长，行可久；先质而后文；此圣人务也。</li><li>欲平治天下，当今之世，舍我其谁也？</li><li>离娄之明，公输子之巧，不以规矩，不能成方圆。师旷之聪，不以六律，不能正五音。尧舜之道，不以仁政，不能平治天下。</li><li>以力假仁者霸，以德行仁者王。</li><li>民为贵，社稷次之，君为轻。是故得乎丘民为天子，得乎天子为诸侯，得乎诸侯为大夫。</li><li>所谓大德大贤，即能治国家社会之专家也。</li><li>恻隐之心，仁之端也。羞恶之心，义之端也。辞让之心，礼之端也。是非知心，智之端也。72.人之所以喜于禽兽者几希，庶民去之，君子存之。</li><li>莫之为而为者天也，莫之致而至者命也。</li><li>慎终追远，民德归厚矣。</li><li>居天下之广居，立天下之正位，行天下之大道。得志与民由之，不得志独行其道。富贵不能淫，贫贱不能移，威武不能屈，此之谓大丈夫。</li><li>重生则轻利。</li><li>告子曰：“性无善无不善。”</li><li>人法地，地法天，天法道，道法自然。</li><li>道常无为无不为。</li><li>道生之，德畜之，物形之，势成之。是以万物莫不尊道而贵德。道之尊，德之贵，夫莫之命而常自然。</li><li>曲则全，枉则直，洼则盈，敝则新，少则得，多则惑。</li><li>天知道其犹张弓欤，高者抑之，下者举之。有馀者损之，不足者补之。</li><li>正言若反。</li><li>将欲歙之，必固张之；将欲弱之，必固强之；将欲废之，必固兴之；将欲夺之，必故与之。</li><li>甚爱必大费，多藏必厚亡。</li><li>不自见故明，不自是故彰；不自伐故有功，不自矜故长；夫惟不争，故天下莫能与之争。</li><li>慈故能勇，俭故能广，不敢为天下先，故能成器长。</li><li>大成若缺，其用不弊；大盈若冲，其用不穷；大直若屈，大巧若拙，大辩若讷。</li><li>我无为而民自化，我好静而民自正，我无事而民自富，我无欲而民自朴。</li><li>物或益之而损，物或损之而已。</li><li>不尚贤，使民不争。不贵难得之货，使民不为盗。不见可欲，使民心不乱。是以圣人之治，虚其心，实其腹，弱其志，强其骨，常使民无知无欲。</li><li>知足不辱，知止不殆，可以长久。</li><li>祸莫大于不知足，咎莫大于欲得。故知足之足常足矣。</li><li>民之难治，以其智多；故以智治国国之贼，不以智治国国之福。</li><li>老子理想的社会：小国寡民，是有什伯之器而不用，使民重死而不远徙。虽有舟舆，无所乘之；虽有甲兵，无所陈之。使人复结绳而用之。甘其食，美其服，安其居，乐其俗。邻国相望，鸡犬之声相闻。民至老死不相往来。</li><li>大文明若野蛮。</li><li>孔子曰：“必也正名乎？名不正则言不顺，言不顺则事不成。”</li><li>天下无方，故所在为中，循环无端，故所在为始也。</li><li>儒家认为爱人是有等级的。“君子之于物也，爱之而弗仁；于民也，仁之而弗亲。亲亲而仁民，仁民而爱物。”</li><li>孟子说：“人之有道也，饱食、暖衣、逸居而无教，则近于禽兽。圣人有忧之，使契为司徒，教以人伦：父子有亲，君臣有义，夫妇有别，长幼有序，朋友有信。”</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;其道甚微而易，其意甚幽而深。&lt;/li&gt;
&lt;li&gt;内动外静，后发先至；全神贯注，反应迅捷；变化多端，出敌不意。&lt;/li&gt;
&lt;li&gt;庾信的《宇文盛墓志》中有两句说：“授图黄石，不无师表之心，学剑白猿，遂得风云之志。”杜牧之有两句诗说：“授图黄石老，学剑白猿翁。&lt;/li&gt;
&lt;li&gt;靡不有初，鲜克有终。&lt;/li&gt;
&lt;li&gt;寡取易盈，好逞易穷，驽钝之材也。&lt;/li&gt;
&lt;li&gt;为天地立心，为生民立命，为往圣继绝学，为万世开太平。&lt;/li&gt;
&lt;li&gt;其持之有故，其言之成理。&lt;/li&gt;
&lt;li&gt;西洋所谓哲学，与中国魏晋人所谓玄学，宋明人所谓道学，及清人所谓义理之学，其所研究之对象，颇可谓约略相当。&lt;/li&gt;
&lt;li&gt;乃折枝之类，非挟泰山以超北海之类。
    
    </summary>
    
      <category term="读书" scheme="https://yumuzi.github.io/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
      <category term="随笔" scheme="https://yumuzi.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>网络编程学习过程中的点滴记录</title>
    <link href="https://yumuzi.github.io/webprogramming/"/>
    <id>https://yumuzi.github.io/webprogramming/</id>
    <published>2016-11-25T04:35:02.000Z</published>
    <updated>2016-11-25T05:49:48.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CSS样式表"><a href="#CSS样式表" class="headerlink" title="CSS样式表"></a>CSS样式表</h2><ul><li><code>padding</code>：内边距</li><li><code>margin</code>：外边距</li><li><code>background</code>：背景，#fff, #333, #ccc; #f00; #06f;</li><li><code>font-size</code>: 字体大小</li><li><code>list-style-type</code>: none; 用于去除 ul 中的点样式</li><li><code>width</code>: 宽度，120px; 80%; auto(可以用来抵消之前的设置)</li><li><code>height</code>：高度</li><li><code>line-height</code>: 行高，常与height一块儿用，垂直居中</li><li><code>text-indent</code>: 缩进，-9999px；使得对象消失</li><li><code>#header</code>：“#”用于html中的id</li><li><code>border</code>：边框，solid-实线；dashed-虚线</li></ul><a id="more"></a><ul><li><code>background</code>：url(../../images/logo1.png) no-repeat;</li><li><code>display</code>: block;</li><li><code>text-align</code>: 文字位置，right; left; center;</li><li><code>display</code>: inline; 用于ul li在一行中显示</li><li><code>text-decoration</code>: 用于修饰 超链接 a    none; underline;</li><li><code>clear</code>: both; 常用于IE浏览器消除左右浮动</li><li><code>letter-spacing</code>: 字符间距</li><li><code>float</code>: 浮动</li><li><code>font-weight</code>: bold; 文字加粗</li><li><code>cursor</code>: pointer; 将箭头转换为“小手”</li></ul><h2 id="JavaScript基础"><a href="#JavaScript基础" class="headerlink" title="JavaScript基础"></a>JavaScript基础</h2><ol><li><code>&lt;script type=&quot;text/javascript&quot; src=&quot;###&quot;&gt;&lt;/script&gt;</code></li><li>区分大小写；</li><li>标识符组成开头：必须是字符、下划线和<code>$</code>；其他字母除此三者外，还可为数字；不能把关键字、保留字（<code>true/false/null</code>）作为标识符；</li><li>单行注释：<code>//</code> 注释用途：说明、调试；多行注释：<code>/* */</code></li><li>字面量：就是程序中直接显示出来的；数字字面量，字符串字面量，布尔值字面量，正则表达式字面量，对象字面量表达式<code>{x:1,y:2}</code>；数组字面量表达式</li><li>关键字：程序中已经开始使用的字符； 保留字：将来可能被用作关键字；</li><li>数据类型的种类：<code>undefined</code>, <code>null</code>, <code>boolean</code>, <code>number</code>, <code>string</code>, <code>object</code>，不支持任何自定义类型的机制</li><li>操作符：<code>typeof()</code> 用来检测变量的数据类型，返回的字符串包括：<code>undefined</code>, <code>boolean</code>, <code>string</code>, <code>number</code>, <code>object</code>（对象或<code>null</code>）, <code>function</code></li><li><code>alert(undefined==null);</code>   //返回true  <code>alert(undefined===null);</code>  //返回false</li><li><code>boolean</code>类型的字面量只有两个：<code>true</code>, <code>fals</code>e，其他大小写不一致的都不是它的值</li><li>可以用<code>boolean()</code>来转换变量的类型，即强制转换；可转换为<code>false</code>的值有：<code>false</code>, <code>&#39;&#39;</code>, <code>0</code>, <code>NaN</code>, <code>null</code>, <code>undefined</code></li><li>浮点数的范围：<code>Number.MIN_VALUE</code>, <code>Number.MAX_VALUE</code> 最小值和最大值<br>13.<code>Number.POSITIVE_INFINITY</code>, <code>Number.NEGATIVE_INFINITY</code>  正无穷和负无穷</li><li>函数：<code>isFinite()</code>   确定一个数值是否超过了规定范围</li><li><code>alert(NaN==NaN);</code>  //返回false</li><li>将非数值转换为数值的3个函数：<code>Number()</code>, <code>parseInt()</code>, <code>parseFloat()</code>   第一个用于任何数据类型，后两者用于把字符串转成数值；</li><li><code>\t</code>: 制表符   <code>\u03a3</code>: 求和符号</li><li>函数：<code>toString()</code>   转换为<code>string</code>类型，强制转换  <code>String(null);</code> <code>String(undefined);</code></li><li><code>+</code>其中有一个变量为字符串，则最终得到字符串</li></ol><h2 id="HTTP响应消息中常见的状态消息"><a href="#HTTP响应消息中常见的状态消息" class="headerlink" title="HTTP响应消息中常见的状态消息"></a>HTTP响应消息中常见的状态消息</h2><ul><li>200：成功，服务器成功返回网页</li><li>301：永久移动，请求的网页已成功移动到新位置。服务器返回此响应时，会自动将请求者转到新位置</li><li>304：未修改，自上次请求后，请求的网页未修改过。服务器返回此响应时，不会返回网页内容</li><li>400：错误请求，服务器不理解请求的语法</li><li>404：未找到，服务器找不到请求的网页</li><li>500：服务器内部错误，服务器遇到错误，无法完成请求</li><li>502：错误网关，服务器作为网关或代理，从上游服务器收到无效响应</li><li>505：HTTP版本不受支持，服务器不支持请求中所用的HTTP协议版本</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;CSS样式表&quot;&gt;&lt;a href=&quot;#CSS样式表&quot; class=&quot;headerlink&quot; title=&quot;CSS样式表&quot;&gt;&lt;/a&gt;CSS样式表&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;padding&lt;/code&gt;：内边距&lt;/li&gt;
&lt;li&gt;&lt;code&gt;margin&lt;/code&gt;：外边距&lt;/li&gt;
&lt;li&gt;&lt;code&gt;background&lt;/code&gt;：背景，#fff, #333, #ccc; #f00; #06f;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;font-size&lt;/code&gt;: 字体大小&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list-style-type&lt;/code&gt;: none; 用于去除 ul 中的点样式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;width&lt;/code&gt;: 宽度，120px; 80%; auto(可以用来抵消之前的设置)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;height&lt;/code&gt;：高度&lt;/li&gt;
&lt;li&gt;&lt;code&gt;line-height&lt;/code&gt;: 行高，常与height一块儿用，垂直居中&lt;/li&gt;
&lt;li&gt;&lt;code&gt;text-indent&lt;/code&gt;: 缩进，-9999px；使得对象消失&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#header&lt;/code&gt;：“#”用于html中的id&lt;/li&gt;
&lt;li&gt;&lt;code&gt;border&lt;/code&gt;：边框，solid-实线；dashed-虚线&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="programming" scheme="https://yumuzi.github.io/tags/programming/"/>
    
  </entry>
  
  <entry>
    <title>研究生期间去土耳其参加国际会议相关手续办理流程</title>
    <link href="https://yumuzi.github.io/tuerqi-qianzheng/"/>
    <id>https://yumuzi.github.io/tuerqi-qianzheng/</id>
    <published>2016-09-03T13:44:50.000Z</published>
    <updated>2016-09-03T14:29:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>研二暑假曾计划前往土耳其参加一个国际学术会议，但因故未能成行，现将相关手续办理流程记录于此，以资借鉴。</p><h1 id="护照"><a href="#护照" class="headerlink" title="护照"></a>护照</h1><ul><li>上海户口：具有上海户口的，直接携带身份证前往上海出入境管理中心办理即可，一般时间为15天；</li><li>非上海户口：非上海户口的，按照学校的相关规定进行办理。</li></ul><a id="more"></a><h1 id="学校手续"><a href="#学校手续" class="headerlink" title="学校手续"></a>学校手续</h1><p>老师办理的是因公护照，学生是因私护照，但为了后期报销需要，均需要在学校办理相关手续。</p><ul><li>前往<a href="http://www.tongji-uni.com/" target="_blank" rel="external">同济大学外事办</a>下载学生手册PDF文件，了解需要准备的材料和应办的事项；</li><li>材料准备好后，需要到系办申请公示（此项老师需办理），公示时间为一周；</li><li>公示完成后，携带相关材料到同济大学外事办（综合楼7楼）进行办理，时间为5-7天；</li><li>在规定时间内领取相关材料；</li><li>（对于老师）携带领取的材料办理因公签证。</li></ul><h1 id="因私签证"><a href="#因私签证" class="headerlink" title="因私签证"></a>因私签证</h1><p>对于学生，需亲自前往外国驻上海使领馆办理隐私签证。</p><ul><li>从网上登陆外国驻上海使领馆的网页，了解需要准备的材料，并进行网上预约（视情况而定）；</li><li>准备申请材料：这里列出主要的三项，1) 申请表：按要求填写并打印；2) 会议邀请函（若要求原件，可将电子版邀请函彩色打印）；3) 人身保险：可在淘宝上购买；</li><li>按预约时间前往提交申请材料；</li><li>约一周左右（视具体情况而定）可前往领取签证。</li></ul><p><strong>大体情况就是这些，以后有新的经验再来补充^_^</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;研二暑假曾计划前往土耳其参加一个国际学术会议，但因故未能成行，现将相关手续办理流程记录于此，以资借鉴。&lt;/p&gt;
&lt;h1 id=&quot;护照&quot;&gt;&lt;a href=&quot;#护照&quot; class=&quot;headerlink&quot; title=&quot;护照&quot;&gt;&lt;/a&gt;护照&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;上海户口：具有上海户口的，直接携带身份证前往上海出入境管理中心办理即可，一般时间为15天；&lt;/li&gt;
&lt;li&gt;非上海户口：非上海户口的，按照学校的相关规定进行办理。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="学术" scheme="https://yumuzi.github.io/categories/%E5%AD%A6%E6%9C%AF/"/>
    
    
      <category term="visa" scheme="https://yumuzi.github.io/tags/visa/"/>
    
  </entry>
  
  <entry>
    <title>Python 操作 MySQL 数据库</title>
    <link href="https://yumuzi.github.io/python-ymgs/"/>
    <id>https://yumuzi.github.io/python-ymgs/</id>
    <published>2016-07-08T15:27:15.000Z</published>
    <updated>2016-07-08T15:33:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>一个用<code>python</code>操作网络后台<code>mysql</code>数据库的小案例，保存于此，以备不时之需。</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</div><div class="line"><span class="keyword">import</span> MySQLdb</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="keyword">import</span> datetime</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 打开数据库连接</span></div><div class="line">db = MySQLdb.connect(<span class="string">"host"</span>,<span class="string">"username"</span>,<span class="string">"password"</span>,<span class="string">"database"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 使用 cursor() 方法获取操作游标</span></div><div class="line">cursor = db.cursor()</div><div class="line"></div><div class="line"><span class="comment"># SQL 查询语句</span></div><div class="line"></div><div class="line"><span class="comment"># 网关1</span></div><div class="line"><span class="comment">## 传感器1-1</span></div><div class="line">num_1_1 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=1 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_1_1_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=1 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_1_1_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=1 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_1_1_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=1 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_1_1_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=1 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment">## 传感器1-2</span></div><div class="line">num_1_2 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=2 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_1_2_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=2 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_1_2_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=2 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_1_2_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=2 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_1_2_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=2 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment">## 传感器1-3</span></div><div class="line">num_1_3 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=3 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_1_3_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=3 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_1_3_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=3 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_1_3_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=3 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_1_3_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=3 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 网关2</span></div><div class="line"><span class="comment">## 传感器2-1</span></div><div class="line">num_2_1 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=62 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_2_1_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=62 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_2_1_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=62 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_2_1_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=62 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_2_1_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=62 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment">## 传感器2-2</span></div><div class="line">num_2_2 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=63 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_2_2_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=63 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_2_2_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=63 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_2_2_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=63 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_2_2_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=63 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment">## 传感器2-3</span></div><div class="line">num_2_3 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=64 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_2_3_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=64 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_2_3_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=64 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_2_3_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=64 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_2_3_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=64 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment"># 网关3</span></div><div class="line"><span class="comment">## 传感器3-1</span></div><div class="line">num_3_1 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=69 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_3_1_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=69 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_3_1_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=69 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_3_1_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=69 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_3_1_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=69 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment">## 传感器3-2</span></div><div class="line">num_3_2 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=70 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_3_2_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=70 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_3_2_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=70 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_3_2_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=70 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_3_2_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=70 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment"># 网关4</span></div><div class="line"><span class="comment">## 传感器4-1</span></div><div class="line">num_4_1 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=73 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_4_1_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=73 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_4_1_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=73 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_4_1_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=73 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_4_1_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=73 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment">## 传感器4-2</span></div><div class="line">num_4_2 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=74 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_4_2_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=74 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_4_2_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=74 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_4_2_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=74 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_4_2_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=74 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="comment">## 传感器4-3</span></div><div class="line">num_4_3 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE device_id=75 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_4_3_current1_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_1=0 and device_id=75 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">num_4_3_current2_0 = <span class="string">"SELECT device_id FROM riskass_device_logic_data WHERE current_2=0 and device_id=75 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_4_3_min = <span class="string">"SELECT MIN(create_time) FROM riskass_device_logic_data WHERE device_id=75 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line">time_4_3_max = <span class="string">"SELECT MAX(create_time) FROM riskass_device_logic_data WHERE device_id=75 and create_time like '%"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">"%';"</span></div><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="comment"># 执行SQL语句</span></div><div class="line"></div><div class="line">    <span class="comment">#网关1</span></div><div class="line">    <span class="comment">## 传感器1-1</span></div><div class="line">    num_1_1 = cursor.execute(num_1_1)</div><div class="line">    num_1_1_current1_0 = cursor.execute(num_1_1_current1_0)</div><div class="line">    num_1_1_current2_0 = cursor.execute(num_1_1_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">## 传感器1-2</span></div><div class="line">    num_1_2 = cursor.execute(num_1_2)</div><div class="line">    num_1_2_current1_0 = cursor.execute(num_1_2_current1_0)</div><div class="line">    num_1_2_current2_0 = cursor.execute(num_1_2_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">## 传感器2-3</span></div><div class="line">    num_1_3 = cursor.execute(num_1_3)</div><div class="line">    num_1_3_current1_0 = cursor.execute(num_1_3_current1_0)</div><div class="line">    num_1_3_current2_0 = cursor.execute(num_1_3_current2_0)</div><div class="line"></div><div class="line">    </div><div class="line">    <span class="comment">#网关2</span></div><div class="line">    <span class="comment">## 传感器2-1</span></div><div class="line">    num_2_1 = cursor.execute(num_2_1)</div><div class="line">    num_2_1_current1_0 = cursor.execute(num_2_1_current1_0)</div><div class="line">    num_2_1_current2_0 = cursor.execute(num_2_1_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">## 传感器2-2</span></div><div class="line">    num_2_2 = cursor.execute(num_2_2)</div><div class="line">    num_2_2_current1_0 = cursor.execute(num_2_2_current1_0)</div><div class="line">    num_2_2_current2_0 = cursor.execute(num_2_2_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">## 传感器2-3</span></div><div class="line">    num_2_3 = cursor.execute(num_2_3)</div><div class="line">    num_2_3_current1_0 = cursor.execute(num_2_3_current1_0)</div><div class="line">    num_2_3_current2_0 = cursor.execute(num_2_3_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">#网关3</span></div><div class="line">    <span class="comment">## 传感器3-1</span></div><div class="line">    num_3_1 = cursor.execute(num_3_1)</div><div class="line">    num_3_1_current1_0 = cursor.execute(num_3_1_current1_0)</div><div class="line">    num_3_1_current2_0 = cursor.execute(num_3_1_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">## 传感器3-2</span></div><div class="line">    num_3_2 = cursor.execute(num_3_2)</div><div class="line">    num_3_2_current1_0 = cursor.execute(num_3_2_current1_0)</div><div class="line">    num_3_2_current2_0 = cursor.execute(num_3_2_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">#网关4</span></div><div class="line">    <span class="comment">## 传感器4-1</span></div><div class="line">    num_4_1 = cursor.execute(num_4_1)</div><div class="line">    num_4_1_current1_0 = cursor.execute(num_4_1_current1_0)</div><div class="line">    num_4_1_current2_0 = cursor.execute(num_4_1_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">## 传感器4-2</span></div><div class="line">    num_4_2 = cursor.execute(num_4_2)</div><div class="line">    num_4_2_current1_0 = cursor.execute(num_4_2_current1_0)</div><div class="line">    num_4_2_current2_0 = cursor.execute(num_4_2_current2_0)</div><div class="line"></div><div class="line">    <span class="comment">## 传感器4-3</span></div><div class="line">    num_4_3 = cursor.execute(num_4_3)</div><div class="line">    num_4_3_current1_0 = cursor.execute(num_4_3_current1_0)</div><div class="line">    num_4_3_current2_0 = cursor.execute(num_4_3_current2_0)</div><div class="line">    </div><div class="line">    <span class="comment"># 获取所有记录列表</span></div><div class="line">    fo = open(<span class="string">"益马高速网关数据反馈汇总"</span> + time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime(time.time())) + <span class="string">".txt"</span>, <span class="string">"a"</span>)</div><div class="line">    now = time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>,time.localtime(time.time()))</div><div class="line">    fo.write(<span class="string">"当前时间：%s\n\n"</span> % now)</div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 网关1</span></div><div class="line">    <span class="comment"># 传感器1-1</span></div><div class="line">    fo.write(<span class="string">"莫家大屋右线--传感器1-1：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_1_1)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_1_1_current1_0)</div><div class="line">    <span class="keyword">if</span> num_1_1 != <span class="number">0</span>:</div><div class="line">        percent1_1_1 = num_1_1_current1_0 / num_1_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent1_1_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent1_1_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_1_1_current2_0)</div><div class="line">    <span class="keyword">if</span> num_1_1 != <span class="number">0</span>:</div><div class="line">        percent1_1_2 = num_1_1_current2_0 / num_1_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent1_1_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent1_1_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_1_1_min = cursor.execute(time_1_1_min)</div><div class="line">    time_1_1_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_1_1_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_1_1_max = cursor.execute(time_1_1_max)</div><div class="line">    time_1_1_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_1_1_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-1停止工作！\n"</span>)</div><div class="line">            tag1_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-1停止工作！\n"</span>)</div><div class="line">            tag1_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-1正常工作\n"</span>)</div><div class="line">            tag1_1 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">###########################################</span></div><div class="line"></div><div class="line">    <span class="comment"># 传感器1-2</span></div><div class="line">    fo.write(<span class="string">"莫家大屋右线--传感器1-2：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_1_2)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_1_2_current1_0)</div><div class="line">    num_1_1 = float(num_1_2)</div><div class="line">    <span class="keyword">if</span> num_1_2 != <span class="number">0</span>:</div><div class="line">        percent1_2_1 = num_1_2_current1_0 / num_1_2</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent1_2_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent1_2_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_1_2_current2_0)</div><div class="line">    <span class="keyword">if</span> num_1_2 != <span class="number">0</span>:</div><div class="line">        percent1_2_2 = num_1_2_current2_0 / num_1_2</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent1_2_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent1_2_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_1_2_min = cursor.execute(time_1_2_min)</div><div class="line">    time_1_2_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_1_2_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_1_2_max = cursor.execute(time_1_2_max)</div><div class="line">    time_1_2_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_1_2_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-2停止工作！\n"</span>)</div><div class="line">            tag1_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-2停止工作！\n"</span>)</div><div class="line">            tag1_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-2正常工作\n"</span>)</div><div class="line">            tag1_2 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">###########################################</span></div><div class="line"></div><div class="line">    <span class="comment"># 传感器1-3</span></div><div class="line">    fo.write(<span class="string">"莫家大屋右线--传感器1-3：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_1_3)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_1_3_current1_0)</div><div class="line">    <span class="keyword">if</span> num_1_3 != <span class="number">0</span>:</div><div class="line">        percent1_3_1 = num_1_3_current1_0 / num_1_3</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent1_3_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent1_3_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_1_3_current2_0)</div><div class="line">    <span class="keyword">if</span> num_1_3 != <span class="number">0</span>:</div><div class="line">        percent1_3_2 = num_1_3_current2_0 / num_1_3</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent1_3_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent1_3_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_1_3_min = cursor.execute(time_1_3_min)</div><div class="line">    time_1_3_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_1_3_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_1_3_max = cursor.execute(time_1_3_max)</div><div class="line">    time_1_3_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_1_3_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-3停止工作！\n"</span>)</div><div class="line">            tag1_3 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-3停止工作！\n"</span>)</div><div class="line">            tag1_3 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器1-3正常工作\n"</span>)</div><div class="line">            tag1_3 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> tag1_1|tag1_2|tag1_3:</div><div class="line">        fo.write(<span class="string">"网关1正常工作\n\n"</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        fo.write(<span class="string">"网关1停止工作！\n\n"</span>)</div><div class="line"></div><div class="line">    fo.write(<span class="string">"====================================================\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">#=========================================#</span></div><div class="line">    <span class="comment"># 网关2</span></div><div class="line">    <span class="comment"># 传感器2-1</span></div><div class="line">    fo.write(<span class="string">"莫家大屋左线--传感器2-1：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_2_1)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_2_1_current1_0)</div><div class="line">    <span class="keyword">if</span> num_2_1 != <span class="number">0</span>:</div><div class="line">        percent2_1_1 = num_2_1_current1_0 / num_2_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent2_1_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent2_1_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_2_1_current2_0)</div><div class="line">    <span class="keyword">if</span> num_2_1 != <span class="number">0</span>:</div><div class="line">        percent2_1_2 = num_2_1_current2_0 / num_2_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent2_1_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent2_1_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_2_1_min = cursor.execute(time_2_1_min)</div><div class="line">    time_2_1_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_2_1_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_2_1_max = cursor.execute(time_2_1_max)</div><div class="line">    time_2_1_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_2_1_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-1停止工作！\n"</span>)</div><div class="line">            tag2_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-1停止工作！\n"</span>)</div><div class="line">            tag2_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-1正常工作\n"</span>)</div><div class="line">            tag2_1 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">###########################################</span></div><div class="line"></div><div class="line">    <span class="comment"># 传感器2-2</span></div><div class="line">    fo.write(<span class="string">"莫家大屋左线--传感器2-2：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_2_2)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_2_2_current1_0)</div><div class="line">    num_2_1 = float(num_2_2)</div><div class="line">    <span class="keyword">if</span> num_2_2 != <span class="number">0</span>:</div><div class="line">        percent2_2_1 = num_2_2_current1_0 / num_2_2</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent2_2_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent2_2_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_2_2_current2_0)</div><div class="line">    <span class="keyword">if</span> num_2_2 != <span class="number">0</span>:</div><div class="line">        percent2_2_2 = num_2_2_current2_0 / num_2_2</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent2_2_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent2_2_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_2_2_min = cursor.execute(time_2_2_min)</div><div class="line">    time_2_2_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_2_2_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_2_2_max = cursor.execute(time_2_2_max)</div><div class="line">    time_2_2_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_2_2_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-2停止工作！\n"</span>)</div><div class="line">            tag2_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-2停止工作！\n"</span>)</div><div class="line">            tag2_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-2正常工作\n"</span>)</div><div class="line">            tag2_2 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">###########################################</span></div><div class="line"></div><div class="line">    <span class="comment"># 传感器2-3</span></div><div class="line">    fo.write(<span class="string">"莫家大屋左线--传感器2-3：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_2_3)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_2_3_current1_0)</div><div class="line">    <span class="keyword">if</span> num_2_3 != <span class="number">0</span>:</div><div class="line">        percent2_3_1 = num_2_3_current1_0 / num_2_3</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent2_3_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent2_3_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_2_3_current2_0)</div><div class="line">    <span class="keyword">if</span> num_2_3 != <span class="number">0</span>:</div><div class="line">        percent2_3_2 = num_2_3_current2_0 / num_2_3</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent2_3_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent2_3_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_2_3_min = cursor.execute(time_2_3_min)</div><div class="line">    time_2_3_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_2_3_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_2_3_max = cursor.execute(time_2_3_max)</div><div class="line">    time_2_3_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_2_3_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-3停止工作！\n"</span>)</div><div class="line">            tag2_3 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-3停止工作！\n"</span>)</div><div class="line">            tag2_3 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器2-3正常工作\n"</span>)</div><div class="line">            tag2_3 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> tag2_1|tag2_2|tag2_3:</div><div class="line">        fo.write(<span class="string">"网关2正常工作\n\n"</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        fo.write(<span class="string">"网关2停止工作！\n\n"</span>)</div><div class="line"></div><div class="line">    fo.write(<span class="string">"====================================================\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">#=========================================#</span></div><div class="line">    <span class="comment"># 网关3</span></div><div class="line">    <span class="comment"># 传感器3-1</span></div><div class="line">    fo.write(<span class="string">"板山左线--传感器3-1：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_3_1)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_3_1_current1_0)</div><div class="line">    <span class="keyword">if</span> num_3_1 != <span class="number">0</span>:</div><div class="line">        percent3_1_1 = num_3_1_current1_0 / num_3_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent3_1_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent3_1_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_3_1_current2_0)</div><div class="line">    <span class="keyword">if</span> num_3_1 != <span class="number">0</span>:</div><div class="line">        percent3_1_2 = num_3_1_current2_0 / num_3_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent3_1_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent3_1_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_3_1_min = cursor.execute(time_3_1_min)</div><div class="line">    time_3_1_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_3_1_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_3_1_max = cursor.execute(time_3_1_max)</div><div class="line">    time_3_1_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_3_1_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器3-1停止工作！\n"</span>)</div><div class="line">            tag3_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器3-1停止工作！\n"</span>)</div><div class="line">            tag3_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器3-1正常工作\n"</span>)</div><div class="line">            tag3_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">###########################################</span></div><div class="line"></div><div class="line">    <span class="comment"># 传感器3-2</span></div><div class="line">    fo.write(<span class="string">"板山左线--传感器3-2：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_3_2)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_3_2_current1_0)</div><div class="line">    <span class="keyword">if</span> num_3_2 != <span class="number">0</span>:</div><div class="line">        percent3_2_1 = num_3_2_current1_0 / num_3_2</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent3_2_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent3_2_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_3_2_current2_0)</div><div class="line">    <span class="keyword">if</span> num_3_2 != <span class="number">0</span>:</div><div class="line">        percent3_2_2 = num_3_2_current2_0 / num_3_2</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent3_2_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent3_2_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_3_2_min = cursor.execute(time_3_2_min)</div><div class="line">    time_3_2_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_3_2_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_3_2_max = cursor.execute(time_3_2_max)</div><div class="line">    time_3_2_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_3_2_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器3-2停止工作！\n"</span>)</div><div class="line">            tag3_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器3-2停止工作！\n"</span>)</div><div class="line">            tag3_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器3-2正常工作\n"</span>)</div><div class="line">            tag3_2 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> tag3_1|tag3_2:</div><div class="line">        fo.write(<span class="string">"网关3正常工作\n\n"</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        fo.write(<span class="string">"网关3停止工作！\n\n"</span>)</div><div class="line"></div><div class="line">    fo.write(<span class="string">"====================================================\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">#=========================================#</span></div><div class="line">    <span class="comment"># 网关4</span></div><div class="line">    <span class="comment"># 传感器4-1</span></div><div class="line">    fo.write(<span class="string">"板山右线--传感器4-1：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_4_1)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_4_1_current1_0)</div><div class="line">    <span class="keyword">if</span> num_4_1 != <span class="number">0</span>:</div><div class="line">        percent4_1_1 = num_4_1_current1_0 / num_4_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent4_1_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent4_1_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_4_1_current2_0)</div><div class="line">    <span class="keyword">if</span> num_4_1 != <span class="number">0</span>:</div><div class="line">        percent4_1_2 = num_4_1_current2_0 / num_4_1</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent4_1_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent4_1_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_4_1_min = cursor.execute(time_4_1_min)</div><div class="line">    time_4_1_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_4_1_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_4_1_max = cursor.execute(time_4_1_max)</div><div class="line">    time_4_1_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_4_1_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-1停止工作！\n"</span>)</div><div class="line">            tag4_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-1停止工作！\n"</span>)</div><div class="line">            tag4_1 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-1正常工作\n"</span>)</div><div class="line">            tag4_1 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">###########################################</span></div><div class="line"></div><div class="line">    <span class="comment"># 传感器4-2</span></div><div class="line">    fo.write(<span class="string">"板山右线--传感器4-2：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_4_2)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_4_2_current1_0)</div><div class="line">    <span class="keyword">if</span> num_4_2 != <span class="number">0</span>:</div><div class="line">        percent4_2_1 = num_4_2_current1_0 / float(num_4_2)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent4_2_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent4_2_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_4_2_current2_0)</div><div class="line">    <span class="keyword">if</span> num_4_2 != <span class="number">0</span>:</div><div class="line">        percent4_2_2 = num_4_2_current2_0 / num_4_2</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent4_2_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent4_2_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_4_2_min = cursor.execute(time_4_2_min)</div><div class="line">    time_4_2_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_4_2_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_4_2_max = cursor.execute(time_4_2_max)</div><div class="line">    time_4_2_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_4_2_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-2停止工作！\n"</span>)</div><div class="line">            tag4_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-2停止工作！\n"</span>)</div><div class="line">            tag4_2 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-2正常工作\n"</span>)</div><div class="line">            tag4_2 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="comment">###########################################</span></div><div class="line"></div><div class="line">    <span class="comment"># 传感器4-3</span></div><div class="line">    fo.write(<span class="string">"板山右线--传感器4-3：\n"</span>)</div><div class="line">    fo.write(<span class="string">"数据总数目：%d\n"</span> % num_4_3)</div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目数：%d\n"</span> % num_4_3_current1_0)</div><div class="line">    <span class="keyword">if</span> num_4_3 != <span class="number">0</span>:</div><div class="line">        percent4_3_1 = num_4_1_current1_0 / num_4_3</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent4_3_1 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"拱顶沉降数据为0条目所占百分比：%f\n"</span> % percent4_3_1)</div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目数：%d\n"</span> % num_4_3_current2_0)</div><div class="line">    <span class="keyword">if</span> num_4_3 != <span class="number">0</span>:</div><div class="line">        percent4_3_2 = num_4_3_current2_0 / num_4_3</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        percent4_3_2 = <span class="number">1</span></div><div class="line">    fo.write(<span class="string">"水平收敛数据为0条目所占百分比：%f\n"</span> % percent4_3_2)</div><div class="line"></div><div class="line">    <span class="comment">## 获取起始时间</span></div><div class="line">    time_4_3_min = cursor.execute(time_4_3_min)</div><div class="line">    time_4_3_min = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_4_3_min:</div><div class="line">        fo.write(<span class="string">"起始时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">    <span class="comment">## 获取终止时间</span></div><div class="line">    time_4_3_max = cursor.execute(time_4_3_max)</div><div class="line">    time_4_3_max = cursor.fetchall()</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> time_4_3_max:</div><div class="line">        fo.write(<span class="string">"终止时间：%s\n"</span> % row[<span class="number">0</span>])</div><div class="line">        <span class="keyword">if</span> row[<span class="number">0</span>] == <span class="keyword">None</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-3停止工作！\n"</span>)</div><div class="line">            tag4_3 = <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> (datetime.datetime.now() - row[<span class="number">0</span>]).seconds &gt; <span class="number">300</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-3停止工作！\n"</span>)</div><div class="line">            tag4_3 = <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            fo.write(<span class="string">"传感器4-3正常工作\n"</span>)</div><div class="line">            tag4_3 = <span class="number">1</span></div><div class="line"></div><div class="line">    fo.write(<span class="string">"----------------------------------------------------\n"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> tag4_1|tag4_2|tag4_3:</div><div class="line">        fo.write(<span class="string">"网关4正常工作\n\n"</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        fo.write(<span class="string">"网关4停止工作！\n\n"</span>)</div><div class="line"></div><div class="line">    fo.write(<span class="string">"====================================================\n"</span>)</div><div class="line">    </div><div class="line">    fo.close()</div><div class="line"><span class="keyword">except</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"Error: unable to fetch data"</span></div><div class="line"></div><div class="line">db.close()</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一个用&lt;code&gt;python&lt;/code&gt;操作网络后台&lt;code&gt;mysql&lt;/code&gt;数据库的小案例，保存于此，以备不时之需。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="python" scheme="https://yumuzi.github.io/tags/python/"/>
    
      <category term="mysql" scheme="https://yumuzi.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 14.04 安装 R 语言环境</title>
    <link href="https://yumuzi.github.io/ubuntu-r-install/"/>
    <id>https://yumuzi.github.io/ubuntu-r-install/</id>
    <published>2016-07-08T15:23:57.000Z</published>
    <updated>2016-07-12T12:26:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="http://blog.sina.com.cn/s/blog_86c8fc120101fq07.html" target="_blank" rel="external">ubuntu上R的卸载与安装</a></li><li><a href="http://blog.sina.com.cn/s/blog_676069b10102waq8.html" target="_blank" rel="external">ubuntu 从源码编译安装R过程笔记</a></li></ul><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li>操作系统：ubuntu 14.04 amd64</li><li>千万不要用使用系统自带软件源安装，版本太低</li></ul><a id="more"></a><h2 id="源文件下载"><a href="#源文件下载" class="headerlink" title="源文件下载"></a>源文件下载</h2><ul><li><a href="http://mirror.bjtu.edu.cn/cran/src/base/R-3/" target="_blank" rel="external">Index of /cran/src/base/R-3/</a></li><li><code>R-3.2.2</code> 在 <code>ubuntu 14.04 amd64</code> 系统上可用</li></ul><h2 id="卸载低版本-R"><a href="#卸载低版本-R" class="headerlink" title="卸载低版本 R"></a>卸载低版本 <code>R</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get remove r-base-core</div></pre></td></tr></table></figure><h2 id="安装-R"><a href="#安装-R" class="headerlink" title="安装 R"></a>安装 R</h2><p>解压缩后进入解压后的目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> R-3.2.2</div></pre></td></tr></table></figure><h3 id="安装依赖项"><a href="#安装依赖项" class="headerlink" title="安装依赖项"></a>安装依赖项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install build-essential</div><div class="line">$ sudo apt-get install fort77</div><div class="line">$ sudo apt-get install xorg-dev</div><div class="line">$ sudo apt-get install liblzma-dev libblas-dev gfortran</div><div class="line">$ sudo apt-get install gcc-multilib</div><div class="line">$ sudo apt-get install gobjc++</div><div class="line">$ sudo apt-get install aptitude</div><div class="line">$ sudo aptitude install libreadline-dev</div><div class="line">$ sudo apt-get install texinfo</div></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./configure --prefix /home/lyj/R</div><div class="line">$ ./configure --with-x=no --<span class="built_in">enable</span>-R-shlib</div></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ make</div><div class="line">$ make install</div></pre></td></tr></table></figure><h3 id="配置环境变量（可选）"><a href="#配置环境变量（可选）" class="headerlink" title="配置环境变量（可选）"></a>配置环境变量（可选）</h3><p>如果在终端中直接输入 <code>R</code> 就可以进入 <code>R</code> 环境，就无需配置，否则可能起到反作用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo gedit ~/.profile</div></pre></td></tr></table></figure><p>在文件末尾新增：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export PATH=<span class="variable">$PATH</span><span class="symbol">:/home/R-</span><span class="number">3.2</span>.<span class="number">2</span>/bin</div></pre></td></tr></table></figure><p>执行如下命令，使改变的环境变量生效。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">source</span> ~/.profile</div></pre></td></tr></table></figure><h2 id="安装-RStudio"><a href="#安装-RStudio" class="headerlink" title="安装 RStudio"></a>安装 RStudio</h2><p>下载 <code>RStudio.deb</code> 文件直接安装即可。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.sina.com.cn/s/blog_86c8fc120101fq07.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ubuntu上R的卸载与安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.sina.com.cn/s/blog_676069b10102waq8.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ubuntu 从源码编译安装R过程笔记&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;注意事项&quot;&gt;&lt;a href=&quot;#注意事项&quot; class=&quot;headerlink&quot; title=&quot;注意事项&quot;&gt;&lt;/a&gt;注意事项&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;操作系统：ubuntu 14.04 amd64&lt;/li&gt;
&lt;li&gt;千万不要用使用系统自带软件源安装，版本太低&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="技术" scheme="https://yumuzi.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="ubuntu" scheme="https://yumuzi.github.io/tags/ubuntu/"/>
    
      <category term="r" scheme="https://yumuzi.github.io/tags/r/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 博客 NexT 模板配置之记录</title>
    <link href="https://yumuzi.github.io/hexo-next-theme/"/>
    <id>https://yumuzi.github.io/hexo-next-theme/</id>
    <published>2016-06-30T11:12:57.000Z</published>
    <updated>2016-06-30T13:31:41.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>Hexo</code> 博客需要修改两个配置文件：</p><ul><li>站点的配置文件： <code>/_config.yml</code></li><li>模板的配置文件： <code>/themes/next/_config.yml</code><br>以下内容将主要围绕这两个文件展开。</li></ul><h2 id="安装-NexT"><a href="#安装-NexT" class="headerlink" title="安装 NexT"></a>安装 <code>NexT</code></h2><ul><li>下载 <code>hexo-theme-next</code>: <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">NexT</a></li><li>修改站点配置文件：</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">language</span>: zh-Hans</div><div class="line"></div><div class="line"><span class="attribute">url</span>: http://yumuzi.github.io/</div><div class="line"></div><div class="line"><span class="attribute">theme</span>: next</div><div class="line"></div><div class="line"># Deployment</div><div class="line">## Docs: https://hexo.io/docs/deployment.html</div><div class="line"><span class="attribute">deploy:</span></div><div class="line">  type: git</div><div class="line">  <span class="attribute">repo</span>: git@github.com:yumuzi/yumuzi.github.io.git</div><div class="line">  <span class="attribute">branch</span>: master</div></pre></td></tr></table></figure><a id="more"></a><h2 id="配置-NexT"><a href="#配置-NexT" class="headerlink" title="配置 NexT"></a>配置 <code>NexT</code></h2><h3 id="设置侧边栏头像"><a href="#设置侧边栏头像" class="headerlink" title="设置侧边栏头像"></a>设置侧边栏头像</h3><p>在站点配置文件任意位置添加如下代码，并将图片放置在 <code>/source/uploads/</code> 文件夹下。</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">avatar:</span> <span class="meta-keyword">/uploads/</span>avatar.jpg</div></pre></td></tr></table></figure><h3 id="设置评论-duoshuo"><a href="#设置评论-duoshuo" class="headerlink" title="设置评论 duoshuo"></a>设置评论 <code>duoshuo</code></h3><p>在站点配置文件中添加如下代码，并参考 <a href="https://github.com/iissnan/hexo-theme-next/wiki/%E8%AE%BE%E7%BD%AE%E5%A4%9A%E8%AF%B4-DISQUS" target="_blank" rel="external">设置多说 DISQUS</a></p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">duoshuo_shortname:</span> liyanjie</div></pre></td></tr></table></figure><h3 id="添加友情链接"><a href="#添加友情链接" class="headerlink" title="添加友情链接"></a>添加友情链接</h3><p>将链接添加到站点配置文件中。</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Social links</span></div><div class="line"><span class="symbol">social:</span></div><div class="line"><span class="symbol">  GitHub:</span> https:<span class="comment">//github.com/yumuzi</span></div><div class="line"><span class="symbol">  BitBucket:</span> https:<span class="comment">//bitbucket.org/liyanjie/</span></div><div class="line">  <span class="meta">#Twitter: https:<span class="comment">//twitter.com/iissnan</span></span></div><div class="line">  <span class="meta">#Weibo: http:<span class="comment">//weibo.com/iissnan</span></span></div><div class="line">  <span class="meta">#DouBan: http:<span class="comment">//douban.com/people/iissnan</span></span></div><div class="line"><span class="symbol">  ZhiHu:</span> https:<span class="comment">//www.zhihu.com/people/dong-cheng-xi-jiu-46</span></div><div class="line"><span class="symbol">  TRISK:</span> http:<span class="comment">//www.sh-trisk.com/</span></div><div class="line"><span class="symbol">  RiskVisual:</span> http:<span class="comment">//139.196.177.141/VMonitor/Auth/login.html</span></div><div class="line">  TJ-Library: http:<span class="comment">//www.lib.tongji.edu.cn/site/tongji/index.html</span></div><div class="line"><span class="symbol">  GoogleScholar:</span> https:<span class="comment">//scholar.google.com.hk/</span></div><div class="line"><span class="symbol">  BaiDuScholar:</span> http:<span class="comment">//xueshu.baidu.com/</span></div><div class="line"><span class="symbol">  LiaoXuefeng:</span> http:<span class="comment">//www.liaoxuefeng.com/</span></div><div class="line"><span class="symbol">  ESET:</span> http:<span class="comment">//bbs.kafan.cn/thread-1466549-1-1.html</span></div></pre></td></tr></table></figure><h3 id="添加-Google-Webmaster-tools-验证"><a href="#添加-Google-Webmaster-tools-验证" class="headerlink" title="添加 Google Webmaster tools 验证"></a>添加 Google Webmaster tools 验证</h3><p>参考： <a href="https://github.com/iissnan/hexo-theme-next/wiki/%E6%B7%BB%E5%8A%A0-Google-Webmaster-tools-%E9%AA%8C%E8%AF%81" target="_blank" rel="external">添加 Google Webmaster tools 验证</a></p><p>在站点配置文件中添加如下代码：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Google Webmaster tools verification setting</span></div><div class="line"><span class="meta"># See: https:<span class="comment">//www.google.com/webmasters/</span></span></div><div class="line"><span class="symbol">google_site_verification:</span> W8hBJvI6x2_L0qJXcRUxwJbebxd87EQJkLDGRjRslzs</div></pre></td></tr></table></figure><h3 id="添加-Google-Baidu-统计"><a href="#添加-Google-Baidu-统计" class="headerlink" title="添加 Google Baidu 统计"></a>添加 Google Baidu 统计</h3><p>参考：</p><ul><li><a href="https://github.com/iissnan/hexo-theme-next/wiki/%E6%B7%BB%E5%8A%A0-Google---%E7%99%BE%E5%BA%A6-%E7%BB%9F%E8%AE%A1" target="_blank" rel="external">添加 Google 百度 统计</a></li><li><a href="https://www.google.com/intl/zh-CN_hk/analytics/" target="_blank" rel="external">Google Analytics（分析）</a></li><li><a href="http://sitecenter.baidu.com/sc-web/" target="_blank" rel="external">百度统计</a></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> Google Analytics</span></div><div class="line"><span class="meta">#</span><span class="bash"> Google分析ID</span></div><div class="line">google_analytics: UA-80055069-1</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 百度分析ID</span></div><div class="line">baidu_analytics: c09a5ad5b8a33a8dca67eca63cc05ca5</div></pre></td></tr></table></figure><h3 id="添加站点地图"><a href="#添加站点地图" class="headerlink" title="添加站点地图"></a>添加站点地图</h3><p>参考：</p><ul><li><a href="http://lukang.me/2015/optimization-of-hexo-2.html" target="_blank" rel="external">Hexo 优化与定制(二)</a></li><li><a href="http://selfboot.cn/2014/12/21/add_blog_to_google/" target="_blank" rel="external">博客推广——提交搜索引擎</a></li></ul><p>使用插件生成站点地图，代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-generator-sitemap --save</div><div class="line">$ npm install hexo-generator-baidu-sitemap --save</div></pre></td></tr></table></figure><p>并在站点配置文件中添加如下代码：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">sitemap:</span></div><div class="line"><span class="symbol">  path:</span> sitemap.xml</div><div class="line"></div><div class="line"><span class="symbol">baidumap:</span></div><div class="line"><span class="symbol">  path:</span> baidusitemap.xml</div></pre></td></tr></table></figure><h3 id="添加-RSS-订阅"><a href="#添加-RSS-订阅" class="headerlink" title="添加 RSS 订阅"></a>添加 RSS 订阅</h3><p>参考：<a href="http://mritd.me/2016/03/08/Hexo%E6%B7%BB%E5%8A%A0Rss%E8%AE%A2%E9%98%85/" target="_blank" rel="external">Hexo添加Rss订阅</a></p><p>安装 <code>RSS</code> 插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-generator-feed --save</div></pre></td></tr></table></figure><p>在站点配置文件中添加如下代码：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># RSS 订阅支持</span></div><div class="line"><span class="meta"># Feed Atom</span></div><div class="line"><span class="symbol">feed:</span></div><div class="line"><span class="symbol">  type:</span> atom</div><div class="line"><span class="symbol">  path:</span> atom.xml</div><div class="line"><span class="symbol">  limit:</span> <span class="number">20</span></div><div class="line"><span class="symbol">  hub:</span></div></pre></td></tr></table></figure><h3 id="添加站内搜索"><a href="#添加站内搜索" class="headerlink" title="添加站内搜索"></a>添加站内搜索</h3><p>参考：<a href="https://github.com/iissnan/hexo-theme-next/wiki/Swiftype%E7%AB%99%E5%86%85%E6%90%9C%E7%B4%A2" target="_blank" rel="external">Swiftype站内搜索</a></p><h3 id="自定义站内搜索"><a href="#自定义站内搜索" class="headerlink" title="自定义站内搜索"></a>自定义站内搜索</h3><p>参考：<a href="https://github.com/iissnan/hexo-theme-next/wiki/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AB%99%E5%86%85%E6%90%9C%E7%B4%A2" target="_blank" rel="external">自定义站内搜索</a></p><h3 id="阅读次数"><a href="#阅读次数" class="headerlink" title="阅读次数"></a>阅读次数</h3><p>参考：<a href="http://oyjt.github.io/2016/04/09/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD/" target="_blank" rel="external">为博客文章添加阅读量统计功能</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Show number of visitors to each article.</span></div><div class="line"><span class="comment"># You can visit https://leancloud.cn get AppID and AppKey.</span></div><div class="line"><span class="attr">leancloud_visitors:</span></div><div class="line"><span class="attr">  enable:</span> <span class="literal">true</span></div><div class="line"><span class="attr">  app_id:</span> <span class="string">zLSdflMuUY1ECQoMfs2yesmi-gzGzoHsz</span></div><div class="line"><span class="attr">  app_key:</span> <span class="string">vHXMGspVWONNGTitY8143H6v</span></div></pre></td></tr></table></figure><p><strong>未完待续…</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;Hexo&lt;/code&gt; 博客需要修改两个配置文件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;站点的配置文件： &lt;code&gt;/_config.yml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;模板的配置文件： &lt;code&gt;/themes/next/_config.yml&lt;/code&gt;&lt;br&gt;以下内容将主要围绕这两个文件展开。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;安装-NexT&quot;&gt;&lt;a href=&quot;#安装-NexT&quot; class=&quot;headerlink&quot; title=&quot;安装 NexT&quot;&gt;&lt;/a&gt;安装 &lt;code&gt;NexT&lt;/code&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;下载 &lt;code&gt;hexo-theme-next&lt;/code&gt;: &lt;a href=&quot;https://github.com/iissnan/hexo-theme-next&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NexT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;修改站点配置文件：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight http&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;language&lt;/span&gt;: zh-Hans&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;url&lt;/span&gt;: http://yumuzi.github.io/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;theme&lt;/span&gt;: next&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;# Deployment&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;## Docs: https://hexo.io/docs/deployment.html&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;deploy:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  type: git&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;repo&lt;/span&gt;: git@github.com:yumuzi/yumuzi.github.io.git&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;branch&lt;/span&gt;: master&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术" scheme="https://yumuzi.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="blog" scheme="https://yumuzi.github.io/tags/blog/"/>
    
      <category term="hexo" scheme="https://yumuzi.github.io/tags/hexo/"/>
    
      <category term="next" scheme="https://yumuzi.github.io/tags/next/"/>
    
      <category term="theme" scheme="https://yumuzi.github.io/tags/theme/"/>
    
  </entry>
  
  <entry>
    <title>用 Django 开发个人博客</title>
    <link href="https://yumuzi.github.io/Django-firstblog/"/>
    <id>https://yumuzi.github.io/Django-firstblog/</id>
    <published>2016-06-29T06:48:45.000Z</published>
    <updated>2016-06-29T10:58:49.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="http://www.51bxl.cn/blog/2/" target="_blank" rel="external">Django入门教程介绍</a></li></ul><h2 id="Django-搭建开发环境"><a href="#Django-搭建开发环境" class="headerlink" title="Django 搭建开发环境"></a>Django 搭建开发环境</h2><ul><li>首先，安装 <code>python 2.7</code>，过程不在赘述；</li><li>安装 <code>django 1.8.5</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo pip install django==1.8.5</div></pre></td></tr></table></figure><p>检查是否安装成功：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ python</div><div class="line"></div><div class="line">&gt;&gt;&gt; import django</div><div class="line">&gt;&gt;&gt; <span class="built_in">print</span> django.VERSION</div></pre></td></tr></table></figure><p>最后，按 <code>ctrl + d</code> 可以退出 <code>python</code> 环境。</p><a id="more"></a><h2 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ django-admin.py startproject firstblog</div></pre></td></tr></table></figure><p>查看工程目录结构：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tree</div></pre></td></tr></table></figure><h2 id="创建应用模块"><a href="#创建应用模块" class="headerlink" title="创建应用模块"></a>创建应用模块</h2><p>一个工程中可以创建多个应用<code>app</code>，一个app就是一个功能模块，下面创建一个 <code>blog</code> 应用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ python manage.py startapp blog</div></pre></td></tr></table></figure><p>然后，需要将新增的<code>app</code>添加到工程中去，打开 <code>firstblog/settring.py</code> 配置文件，增加一行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">INSTALLED_APPS = (</div><div class="line">    <span class="string">'django.contrib.admin'</span>,</div><div class="line">    <span class="string">'django.contrib.auth'</span>,</div><div class="line">    <span class="string">'django.contrib.contenttypes'</span>,</div><div class="line">    <span class="string">'django.contrib.sessions'</span>,</div><div class="line">    <span class="string">'django.contrib.messages'</span>,</div><div class="line">    <span class="string">'django.contrib.staticfiles'</span>,</div><div class="line">    <span class="string">'blog'</span>,</div><div class="line">)</div></pre></td></tr></table></figure><h2 id="启动工程"><a href="#启动工程" class="headerlink" title="启动工程"></a>启动工程</h2><p>在 <code>firstblog</code> 工程目录下，输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ python manage.py runserver</div></pre></td></tr></table></figure><p>打开浏览器，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">127.0.0.1:8000</div></pre></td></tr></table></figure><h2 id="数据库设置"><a href="#数据库设置" class="headerlink" title="数据库设置"></a>数据库设置</h2><ul><li>安装 <code>mysql</code> 数据库</li></ul><p>参考：<a href="http://yumuzi.github.io/2016/05/23/Ubuntu-python/">Ubuntu + Python 学习之路</a></p><p>然后，安装 <code>navicat for mysql</code> 方便管理数据库。</p><ul><li>新建 <code>blog</code> 数据库</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mysql -u root -p</div><div class="line"></div><div class="line">mysql&gt; create database blog default charset=utf8;</div></pre></td></tr></table></figure><p>打开 <code>firstblog/settings.py</code> 文件，修改：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">DATABASES = &#123;</div><div class="line">    <span class="string">'default'</span>: &#123;</div><div class="line">        <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>,</div><div class="line">        <span class="string">'NAME'</span>: <span class="string">'blog'</span>,</div><div class="line">        <span class="string">'USER'</span>: <span class="string">'root'</span>,</div><div class="line">        <span class="string">'PASSWORD'</span>: <span class="string">'123456'</span>,</div><div class="line">        <span class="string">'HOST'</span>: <span class="string">'localhost'</span>,</div><div class="line">        <span class="string">'PORT'</span>: <span class="string">'3306'</span>,</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">TIME_ZONE = <span class="string">'Asia/Shanghai'</span></div></pre></td></tr></table></figure><ul><li>新建表</li></ul><p>打开 <code>blog/models.py</code> 文件，添加：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</div><div class="line"> </div><div class="line"><span class="comment"># Create your models here.</span></div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tag</span><span class="params">(models.Model)</span>:</span></div><div class="line">    tag_name = models.CharField(<span class="string">'标签'</span>, max_length=<span class="number">50</span>)</div><div class="line">    tag_cn_name = models.CharField(<span class="string">'中文名字'</span>, max_length=<span class="number">50</span>, blank=<span class="keyword">True</span>)</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__unicode__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.tag_name</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(models.Model)</span>:</span></div><div class="line">    title = models.CharField(<span class="string">'标题'</span>, max_length=<span class="number">100</span>)</div><div class="line">    tag = models.ManyToManyField(Tag, max_length=<span class="number">50</span>, blank=<span class="keyword">True</span>)</div><div class="line">    date_time = models.DateTimeField(<span class="string">'日期'</span>, auto_now_add=<span class="keyword">True</span>)</div><div class="line">    content = models.TextField(<span class="string">'内容'</span>, blank=<span class="keyword">True</span>, null=<span class="keyword">True</span>)</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__unicode__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.title</div><div class="line"> </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></div><div class="line">        verbose_name = <span class="string">'文章'</span></div><div class="line">        verbose_name_plural = <span class="string">'文章'</span></div><div class="line">        ordering = [<span class="string">'-date_time'</span>]</div></pre></td></tr></table></figure><p>然后，打开终端，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python manage.py makemigrations</div><div class="line">$ python manage.py migrate</div></pre></td></tr></table></figure><p>创建后台管理用户：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ python manage.py createsuper</div><div class="line">Username (leave blank to use <span class="string">'lyj'</span>): admin</div><div class="line">Email address: admin@123.com</div><div class="line">Password: </div><div class="line">Password (again): </div><div class="line">Superuser created successfully.</div></pre></td></tr></table></figure><p>在 <code>blog/admin.py</code> 中注册这两个表：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</div><div class="line"><span class="keyword">from</span> blog.models <span class="keyword">import</span> Tag, Article</div><div class="line"> </div><div class="line"><span class="comment"># Register your models here.</span></div><div class="line"> </div><div class="line">admin.site.register(Tag)</div><div class="line">admin.site.register(Article)</div></pre></td></tr></table></figure><p>在浏览器中输入 <code>127.0.0.1:8000/admin</code>，会出现登陆界面。</p><h2 id="view-和-url-1"><a href="#view-和-url-1" class="headerlink" title="view 和 url (1)"></a>view 和 url (1)</h2><ul><li>打开 <code>firstblog/urls.py</code> 文件，添加一行打开首页的代码：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> include, url</div><div class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</div><div class="line"><span class="keyword">import</span> settings</div><div class="line"></div><div class="line">urlpatterns = [</div><div class="line">    url(<span class="string">r'^admin/'</span>, include(admin.site.urls)),</div><div class="line">    url(<span class="string">r'^$'</span>, <span class="string">'blog.views.home'</span>, name=<span class="string">'home'</span>),</div><div class="line">]</div></pre></td></tr></table></figure><ul><li>接着打开 <code>blog/views.py</code>，添加 <code>home</code> 函数：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</div><div class="line"></div><div class="line"><span class="comment"># Create your views here.</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span><span class="params">(request)</span>:</span></div><div class="line"> </div><div class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"&lt;label style='color: ff0000'&gt;Hello World&lt;/label&gt;"</span>)</div></pre></td></tr></table></figure><ul><li>然后，启动服务，在浏览器输入 <code>127.0.0.1:8000</code>，可以看到会输出：</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">Hello World</span></div></pre></td></tr></table></figure><h2 id="view-和-url-2"><a href="#view-和-url-2" class="headerlink" title="view 和 url (2)"></a>view 和 url (2)</h2><ul><li>在 <code>view</code> 中使用数据库，修改 <code>home</code> 函数：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</div><div class="line"><span class="comment">#from django.http import HttpResponse</span></div><div class="line"><span class="keyword">from</span> blog.models <span class="keyword">import</span> Article, Tag</div><div class="line"></div><div class="line"><span class="comment"># Create your views here.</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span><span class="params">(request)</span>:</span></div><div class="line">    post_list = Article.objects.all()</div><div class="line"> </div><div class="line">    <span class="comment">#return HttpResponse("&lt;label style='color: ff0000'&gt;Hello World&lt;/label&gt;")</span></div><div class="line">    <span class="keyword">return</span> render(request, <span class="string">'blog/index.html'</span>, &#123;<span class="string">'post_list'</span>:post_list&#125;)</div></pre></td></tr></table></figure><p>此功能是获取所有的文章列表。</p><ul><li>再定义一个文章接收函数：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_articles</span><span class="params">(request, tag_name)</span>:</span></div><div class="line">    post_list = Article.objects.filter(tag_name = tag_name)</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> render(request, <span class="string">'blog/index.html'</span>, &#123;<span class="string">'post_list'</span>:post_list&#125;)</div></pre></td></tr></table></figure><ul><li>根据文章的 <code>id</code> 获取文章的内容：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(request, id)</span>:</span></div><div class="line">    post = Article.objects.get(id = str(id))</div><div class="line">    <span class="keyword">return</span> render(request, <span class="string">'blog/detail.html'</span>, &#123;<span class="string">'post'</span>:post&#125;)</div></pre></td></tr></table></figure><ul><li>在 <code>blog/</code> 目录下建立 <code>url.py</code> 文件，添加代码：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</div><div class="line"></div><div class="line">urlpatterns = [</div><div class="line">    url(<span class="string">r'^$'</span>, <span class="string">'blog.views.home'</span>),</div><div class="line">    url(<span class="string">r'^(?P&lt;id&gt;\d+)/$'</span>, <span class="string">'blog.views.detail'</span>, name=<span class="string">'detail'</span>),</div><div class="line">    url(<span class="string">r'^(?P&lt;tag_name&gt;\w+)/$'</span>, <span class="string">'blog.views.get_articles'</span>, name=<span class="string">'get_articles'</span>),</div><div class="line">]</div></pre></td></tr></table></figure><h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><ul><li><p>在 <code>firstblog/</code> 目录下新增一个 <code>templates</code> 目录，与 <code>blog</code> 目录同级，在 <code>templates</code> 目录下新建一个 <code>blog</code> 目录。</p></li><li><p>由于前台页面中 <code>html, css, js</code> 等开发起来比较复杂，现在基本都用一些比较强大的工具，比如 <code>bootstrap</code>，但鉴于这个例子比较简单，就用一个轻量的 <code>pure</code> 框架。</p></li></ul><p><code>pure</code> 框架安装参考：<a href="http://yumuzi.github.io/2016/05/23/Ubuntu-python/">Ubuntu + Python 学习之路</a></p><ul><li>接着修改 <code>firstblog/settings.py</code> 文件：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">TEMPLATES = [</div><div class="line">    &#123;</div><div class="line">        <span class="string">'BACKEND'</span>: <span class="string">'django.template.backends.django.DjangoTemplates'</span>,</div><div class="line">        <span class="comment">#'DIRS': [],</span></div><div class="line">        <span class="string">'DIRS'</span>: (os.path.join(BASE_DIR, <span class="string">'firstblog/templates/'</span>),),<span class="comment"># 路径要写全</span></div><div class="line">        <span class="string">'APP_DIRS'</span>: <span class="keyword">True</span>,</div><div class="line">        <span class="string">'OPTIONS'</span>: &#123;</div><div class="line">            <span class="string">'context_processors'</span>: [</div><div class="line">                <span class="string">'django.template.context_processors.debug'</span>,</div><div class="line">                <span class="string">'django.template.context_processors.request'</span>,</div><div class="line">                <span class="string">'django.contrib.auth.context_processors.auth'</span>,</div><div class="line">                <span class="string">'django.contrib.messages.context_processors.messages'</span>,</div><div class="line">            ],</div><div class="line">        &#125;,</div><div class="line">    &#125;,</div><div class="line">]</div></pre></td></tr></table></figure><ul><li>下面实现一个简单的功能，把之前从数据库中获取的文章列表在模板中显示出来，在 <code>templates/blog/</code> 下创建 <code>index.html</code>：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--index.html--&gt;</span></div><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"format-detection"</span> <span class="attr">content</span>=<span class="string">"telephone=no"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Keywords"</span> <span class="attr">content</span>=<span class="string">"python,django,django教程,服务器开发,web开发,博客开发"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"东杰网站."</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>东杰网<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://yui.yahooapis.com/pure/0.6.0/pure-min.css"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://picturebag.qiniudn.com/blog.css"</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"layout"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sidebar pure-u-1 pure-u-md-1-4"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Dong&amp;Jie Blog<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>东杰的网站<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"> </div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"> </div><div class="line"> </div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content pure-u-1 pure-u-md-3-4"</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                &#123;% for post in post_list %&#125;</div><div class="line">                    <span class="tag">&lt;<span class="name">section</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>&#123;&#123; post.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"> </div><div class="line">                                <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">                                    日期:  <span class="tag">&lt;<span class="name">label</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>&#123;&#123; post.date_time |date:"Y /m /d H:i:s"&#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">                &#123;% endfor %&#125;</div><div class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><ul><li>模板继承：</li></ul><p>在 <code>templates/blog/</code> 下创建 <code>base.html</code> 文件：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--base.html--&gt;</span></div><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"format-detection"</span> <span class="attr">content</span>=<span class="string">"telephone=no"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"Keywords"</span> <span class="attr">content</span>=<span class="string">"python,django,django教程,服务器开发,web开发,博客开发"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"东杰网站."</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>东杰网<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://yui.yahooapis.com/pure/0.6.0/pure-min.css"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://picturebag.qiniudn.com/blog.css"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://picturebag.qiniudn.com/monokai.css"</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"layout"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sidebar pure-u-1 pure-u-md-1-4"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Dong&amp;Jie Blog<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>东杰的网站<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>                   </div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"> </div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content pure-u-1 pure-u-md-3-4"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                    &#123;% block content %&#125;</div><div class="line">                    &#123;% endblock %&#125;</div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><p>然后，改写 <code>index.html</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--home.html--&gt;</span></div><div class="line">&#123;% extends "blog/base.html" %&#125;</div><div class="line"> </div><div class="line">&#123;% block content %&#125;</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"posts"</span>&gt;</span></div><div class="line">    &#123;% for post in post_list %&#125;</div><div class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"post-header"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"post-title"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>&#123;&#123; post.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"> </div><div class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"post-meta"</span>&gt;</span></div><div class="line">                        日期:  <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"post-author"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>&#123;&#123; post.date_time |date:"Y /m /d H:i:s"&#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">    &#123;% endfor %&#125;</div><div class="line"> </div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.blog-post --&gt;</span></div><div class="line">&#123;% endblock %&#125;</div></pre></td></tr></table></figure><ul><li>点击文章标题，显示文章详情：<br>首先，修改 <code>index.html</code>，将标题的 <code>href</code> 改为：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"post-title"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url "</span><span class="attr">detail</span>" <span class="attr">id</span>=<span class="string">post.id</span> %&#125;" <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>&#123;&#123; post.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div></pre></td></tr></table></figure><p>在 <code>firstblog/urls.py</code> 中添加：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">url(<span class="string">r'^blog/'</span>, include(<span class="string">'blog.urls'</span>)),</div></pre></td></tr></table></figure><p>在 <code>blog/urls.py</code> 中添加：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">url(<span class="string">r'^(?P&lt;id&gt;\d+)/$'</span>, <span class="string">'blog.views.detail'</span>, name=<span class="string">'detail'</span>),</div></pre></td></tr></table></figure><p>在 <code>templates/blog/</code> 下新建一个 <code>detail.html</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--detail.html--&gt;</span></div><div class="line">&#123;% extends "blog/base.html" %&#125;</div><div class="line">&#123;#&#123;% load custom_markdown %&#125;#&#125;</div><div class="line"> </div><div class="line">&#123;% block content %&#125;</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"posts"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"post-header"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"post-title"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>&#123;&#123; post.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"> </div><div class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"post-meta"</span>&gt;</span></div><div class="line">                    日期:  <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"post-author"</span>&gt;</span>&#123;&#123; post.date_time |date:"Y /m /d H:i:s"&#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="tag">&lt;<span class="name">div</span> &gt;</span></div><div class="line">             &#123;&#123; post.content&#125;&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;% endblock %&#125;</div></pre></td></tr></table></figure><p>启动服务，在浏览器中打开，点击标题，就可以看到文章详情了。</p><h2 id="后台-Admin"><a href="#后台-Admin" class="headerlink" title="后台 Admin"></a>后台 Admin</h2><ul><li>实现后台富文本编辑界面</li></ul><p>选择百度的 <code>Ueditor</code> 编辑器：<a href="https://github.com/zhangfisher/DjangoUeditor" target="_blank" rel="external">github Ueditor</a></p><p>下载后，把里面的 <code>DjangoUeditor-master</code> 中的 <code>DjangoUeditor</code> 文件夹放到跟 <code>blog</code> 和 <code>templates</code> 同一级目录</p><p>修改 <code>firstblog/settrings.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">INSTALLED_APPS = (</div><div class="line">    ...</div><div class="line">     </div><div class="line">    <span class="string">'blog'</span>,</div><div class="line">    <span class="string">'DjangoUeditor'</span>,</div><div class="line">)</div></pre></td></tr></table></figure><p>在最下面添加如下代码，保证可以上传图片：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">STATIC_URL = <span class="string">'/static/'</span></div><div class="line">STATIC_ROOT = os.path.join(BASE_DIR, <span class="string">'collected_static'</span>)</div><div class="line"> </div><div class="line">STATICFILES_DIRS = (</div><div class="line">    os.path.join(BASE_DIR, <span class="string">"common_static"</span>),</div><div class="line">)</div><div class="line"> </div><div class="line"><span class="comment"># upload folder</span></div><div class="line">MEDIA_URL = <span class="string">'/media/'</span></div><div class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">'media'</span>)</div></pre></td></tr></table></figure><p>在 <code>firstblog/urls.py</code> 添加：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">url(<span class="string">r'^ueditor/'</span>, include(<span class="string">'DjangoUeditor.urls'</span> )),</div></pre></td></tr></table></figure><p>在最下面添加：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> settrings</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="keyword">if</span> settings.DEBUG:</div><div class="line">    <span class="keyword">from</span> django.conf.urls.static <span class="keyword">import</span> static</div><div class="line">    urlpatterns += static(</div><div class="line">        settings.MEDIA_URL, document_root = settings.MEDIA_ROOT</div><div class="line">    )</div></pre></td></tr></table></figure><p>最后，修改 <code>blog/models.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> DjangoUeditor.models <span class="keyword">import</span> UEditorField</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(models.Model)</span>:</span></div><div class="line"> </div><div class="line">           。。。省略其他代码</div><div class="line">            </div><div class="line">    content = UEditorField(<span class="string">'内容'</span>, height=<span class="number">500</span>, width=<span class="number">1000</span>,</div><div class="line">        default=<span class="string">u''</span>, blank=<span class="keyword">True</span>, imagePath=<span class="string">"uploads/images/"</span>,</div><div class="line">        toolbars=<span class="string">'besttome'</span>, filePath=<span class="string">'uploads/files/'</span>)</div></pre></td></tr></table></figure><ul><li>前台的显示</li></ul><p>首先，修改 <code>templates/blog/base.html</code>，在 <code>&lt;head&gt;</code> 中添加：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/static/ueditor/third-party/SyntaxHighlighter/shCoreDefault.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/static/ueditor/third-party/SyntaxHighlighter/shCore.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">    SyntaxHighlighter.all();</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure><p>然后，将 <code>templates/blog/detail.html</code> 中的：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span></div><div class="line">     &#123;&#123; post.content&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure><p>改为：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span></div><div class="line">    &#123;&#123; post.content|safe &#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure><p><code>safe</code> 把服务器传过来的格式转换为<code>html</code> 格式。</p><p><strong>Over!</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.51bxl.cn/blog/2/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Django入门教程介绍&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Django-搭建开发环境&quot;&gt;&lt;a href=&quot;#Django-搭建开发环境&quot; class=&quot;headerlink&quot; title=&quot;Django 搭建开发环境&quot;&gt;&lt;/a&gt;Django 搭建开发环境&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;首先，安装 &lt;code&gt;python 2.7&lt;/code&gt;，过程不在赘述；&lt;/li&gt;
&lt;li&gt;安装 &lt;code&gt;django 1.8.5&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo pip install django==1.8.5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;检查是否安装成功：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ python&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; import django&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt; django.VERSION&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后，按 &lt;code&gt;ctrl + d&lt;/code&gt; 可以退出 &lt;code&gt;python&lt;/code&gt; 环境。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="python" scheme="https://yumuzi.github.io/tags/python/"/>
    
      <category term="django" scheme="https://yumuzi.github.io/tags/django/"/>
    
      <category term="blog" scheme="https://yumuzi.github.io/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>用 Scrapy 实现的一个网络爬虫</title>
    <link href="https://yumuzi.github.io/spider/"/>
    <id>https://yumuzi.github.io/spider/</id>
    <published>2016-06-22T12:05:26.000Z</published>
    <updated>2016-06-29T11:01:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="http://blog.csdn.net/column/details/why-bug.html" target="_blank" rel="external">Python爬虫入门教程</a></li><li><a href="http://blog.csdn.net/pleasecallmewhy/article/details/19642329" target="_blank" rel="external">[Python]网络爬虫（12）：爬虫框架Scrapy的第一个爬虫示例入门教程</a></li><li><a href="http://blog.csdn.net/u012150179/article/details/32911511" target="_blank" rel="external">scrapy研究探索（二）——爬w3school.com.cn</a></li><li><a href="http://blog.csdn.net/felcon/article/details/46439995" target="_blank" rel="external">Scrapy中文输出与中文保存</a></li><li><a href="http://blog.163.com/fy_ay/blog/static/22028347200991693526268/" target="_blank" rel="external">python 元素列表的可变性（修改，插入，删除）</a></li><li><a href="http://www.cnblogs.com/QuDump/p/3750447.html" target="_blank" rel="external">Ubuntu 14.04 安装 scrapy</a></li></ul><h2 id="Scrapy框架"><a href="#Scrapy框架" class="headerlink" title="Scrapy框架"></a><code>Scrapy</code>框架</h2><h3 id="安装（Ubuntu-14-04）"><a href="#安装（Ubuntu-14-04）" class="headerlink" title="安装（Ubuntu 14.04）"></a>安装（Ubuntu 14.04）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">在执行如下命令之前，确定已经安装了 Python 2.7, lxml, OpenSSL, pip, python-dev</div><div class="line">$ sudo pip install service_identity</div><div class="line">$ sudo pip install Scrapy</div></pre></td></tr></table></figure><a id="more"></a><h3 id="新建项目（tj91）"><a href="#新建项目（tj91）" class="headerlink" title="新建项目（tj91）"></a>新建项目（tj91）</h3><p>下面将建立一个获取“同济大学就业信息网（<a href="http://tj91.tongji.edu.cn/）”的爬虫。" target="_blank" rel="external">http://tj91.tongji.edu.cn/）”的爬虫。</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ scrapy startproject tj91</div></pre></td></tr></table></figure><h3 id="items-py"><a href="#items-py" class="headerlink" title="items.py"></a><code>items.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> scrapy.item <span class="keyword">import</span> Item, Field</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tj91Item</span><span class="params">(Item)</span>:</span></div><div class="line">    title = Field()</div><div class="line">    link = Field()</div><div class="line">    desc = Field()</div></pre></td></tr></table></figure><h3 id="pipelines-py"><a href="#pipelines-py" class="headerlink" title="pipelines.py"></a><code>pipelines.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> codecs</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tj91Pipeline</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.file = codecs.open(<span class="string">'tj91_data_utf8.json'</span>, <span class="string">'wb'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></div><div class="line">        line = json.dumps(dict(item)) + <span class="string">'\n'</span>  </div><div class="line">        self.file.write(line.decode(<span class="string">"unicode_escape"</span>))  </div><div class="line">        <span class="keyword">return</span> item</div></pre></td></tr></table></figure><h3 id="settings-py"><a href="#settings-py" class="headerlink" title="settings.py"></a><code>settings.py</code></h3><p>增加如下内容。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ITEM_PIPELINES = &#123;</div><div class="line">    <span class="string">'tj91.pipelines.Tj91Pipeline'</span>:<span class="number">300</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="主程序-tj91-spider-py"><a href="#主程序-tj91-spider-py" class="headerlink" title="主程序 tj91_spider.py"></a>主程序 <code>tj91_spider.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> scrapy.spider <span class="keyword">import</span> Spider</div><div class="line"><span class="keyword">from</span> scrapy.selector <span class="keyword">import</span> Selector</div><div class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> log</div><div class="line"><span class="keyword">from</span> tj91.items <span class="keyword">import</span> Tj91Item</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tj91Spider</span><span class="params">(Spider)</span>:</span></div><div class="line">    name = <span class="string">"tj91"</span></div><div class="line">    allowed_domains = [<span class="string">"tongji.edu.cn"</span>]</div><div class="line">    start_urls = [</div><div class="line">        <span class="string">"http://tj91.tongji.edu.cn/detach.portal?.f=pe401&amp;.pmn=view&amp;action=bulletinsMoreView&amp;search=true&amp;.ia=false&amp;.pen=pe401&amp;groupid=20"</span>,</div><div class="line">        <span class="string">"http://tj91.tongji.edu.cn/detach.portal?.f=pe401&amp;.pmn=view&amp;action=bulletinsMoreView&amp;search=true&amp;.ia=false&amp;.pen=pe401&amp;groupid=21"</span>,</div><div class="line">        <span class="string">"http://tj91.tongji.edu.cn/detach.portal?pageIndex=2&amp;.pmn=view&amp;groupid=21&amp;action=bulletinsMoreView&amp;pageSize=&amp;.ia=false&amp;.pen=pe401"</span>,</div><div class="line">        <span class="string">"http://tj91.tongji.edu.cn/detach.portal?pageIndex=2&amp;.pmn=view&amp;groupid=20&amp;action=bulletinsMoreView&amp;pageSize=&amp;.ia=false&amp;.pen=pe401"</span></div><div class="line">]</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></div><div class="line">        sel = Selector(response)</div><div class="line">        sites = sel.xpath(<span class="string">'//ul[@id="blpe401"]/li'</span>)</div><div class="line">        items = []</div><div class="line">        <span class="keyword">for</span> site <span class="keyword">in</span> sites:</div><div class="line">            item = Tj91Item()</div><div class="line"></div><div class="line">            title = site.xpath(<span class="string">'a/text()'</span>).extract()<span class="comment"># 获取标题</span></div><div class="line">            date = site.xpath(<span class="string">'span/span/text()'</span>).extract()<span class="comment"># 获取日期</span></div><div class="line">            link = site.xpath(<span class="string">'a/@href'</span>).extract()<span class="comment"># 获取超链接</span></div><div class="line">            item[<span class="string">'title'</span>] = title + date<span class="comment"># 将标题和日期组合显示</span></div><div class="line">            link[<span class="number">1</span>] = <span class="string">"http://tj91.tongji.edu.cn/"</span> + link[<span class="number">1</span>]<span class="comment"># 对爬取的超链接进行修改</span></div><div class="line">            item[<span class="string">'link'</span>] = link[<span class="number">1</span>]</div><div class="line">            items.append(item)</div><div class="line">        <span class="keyword">return</span> items</div></pre></td></tr></table></figure><h3 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ scrapy crawl tj91</div></pre></td></tr></table></figure><p>执行该命令就会在工程根目录生成 <code>tj91_data_utf8.json</code> 文件。</p><p><strong>完成！^_^</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/column/details/why-bug.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python爬虫入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/pleasecallmewhy/article/details/19642329&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;[Python]网络爬虫（12）：爬虫框架Scrapy的第一个爬虫示例入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/u012150179/article/details/32911511&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;scrapy研究探索（二）——爬w3school.com.cn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/felcon/article/details/46439995&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scrapy中文输出与中文保存&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.163.com/fy_ay/blog/static/22028347200991693526268/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;python 元素列表的可变性（修改，插入，删除）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/QuDump/p/3750447.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ubuntu 14.04 安装 scrapy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Scrapy框架&quot;&gt;&lt;a href=&quot;#Scrapy框架&quot; class=&quot;headerlink&quot; title=&quot;Scrapy框架&quot;&gt;&lt;/a&gt;&lt;code&gt;Scrapy&lt;/code&gt;框架&lt;/h2&gt;&lt;h3 id=&quot;安装（Ubuntu-14-04）&quot;&gt;&lt;a href=&quot;#安装（Ubuntu-14-04）&quot; class=&quot;headerlink&quot; title=&quot;安装（Ubuntu 14.04）&quot;&gt;&lt;/a&gt;安装（Ubuntu 14.04）&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;在执行如下命令之前，确定已经安装了 Python 2.7, lxml, OpenSSL, pip, python-dev&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo pip install service_identity&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo pip install Scrapy&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="python" scheme="https://yumuzi.github.io/tags/python/"/>
    
      <category term="spider" scheme="https://yumuzi.github.io/tags/spider/"/>
    
  </entry>
  
  <entry>
    <title>python 实现的若干小程序</title>
    <link href="https://yumuzi.github.io/python-applications/"/>
    <id>https://yumuzi.github.io/python-applications/</id>
    <published>2016-06-21T01:17:23.000Z</published>
    <updated>2016-06-29T11:00:41.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="读取和更改PDF文档标题"><a href="#读取和更改PDF文档标题" class="headerlink" title="读取和更改PDF文档标题"></a>读取和更改PDF文档标题</h2><ul><li>安装<code>python-pypdf</code><br>参考：<a href="https://www.howinstall.co/en/ubuntu/trusty/python-pypdf" target="_blank" rel="external">How to install python-pypdf on Ubuntu 14.04 (Trusty Tahr)</a></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update</div><div class="line">$ sudo apt-get install python-pypdf</div></pre></td></tr></table></figure><a id="more"></a><ul><li>使用</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> pyPdf <span class="keyword">import</span> PdfFileWriter, PdfFileReader</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"><span class="keyword">for</span> fileName <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>):</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">if</span> fileName.lower()[<span class="number">-3</span>:] != <span class="string">"pdf"</span>: <span class="keyword">continue</span></div><div class="line">        input1 = PdfFileReader(file(fileName,<span class="string">"rb"</span>))</div><div class="line"></div><div class="line">        <span class="comment"># print the title of document1.pdf</span></div><div class="line">        fo = open(<span class="string">"foo.txt"</span>, <span class="string">"a"</span>)</div><div class="line">        fo.write(<span class="string">'##1:\n'</span> + fileName + <span class="string">'\n'</span> + <span class="string">'##2:\n'</span> + input1.getDocumentInfo().title + <span class="string">'\n\n'</span>)</div><div class="line">        fo.close()</div><div class="line"></div><div class="line">        <span class="comment"># rename the document with it's title</span></div><div class="line">        os.rename(fileName, input1.getDocumentInfo().title + <span class="string">".pdf"</span>)</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        <span class="keyword">print</span> <span class="string">'##1'</span>, fileName, <span class="string">'##2'</span></div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Success!"</span></div></pre></td></tr></table></figure><h2 id="神经网络-pybrain"><a href="#神经网络-pybrain" class="headerlink" title="神经网络 pybrain"></a>神经网络 <code>pybrain</code></h2><ul><li>安装 <code>pybrain</code><br>参考：<a href="https://github.com/pybrain/pybrain/wiki/Installation" target="_blank" rel="external">Installation</a></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git clone https://github.com/pybrain/pybrain.git</div><div class="line">$ cd pybrain</div><div class="line">$ sudo pip install .</div></pre></td></tr></table></figure><ul><li>使用<br>参考：<a href="http://www.jianshu.com/p/29dd4787096a" target="_blank" rel="external">PyBrain学习笔记（一）</a></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="comment"># 说明：</span></div><div class="line"><span class="comment"># 1.pybrain使用addSample添加输入和目标输出；</span></div><div class="line"><span class="comment"># 2.使用buildNetwork构建神经网络</span></div><div class="line"><span class="comment"># 3.使用BackpropTrainer训练神经网络</span></div><div class="line"><span class="comment"># 4.最后输出原始目标和训练后的结果</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> pybrain.datasets <span class="keyword">import</span> SupervisedDataSet</div><div class="line"><span class="keyword">from</span> pybrain.tools.shortcuts <span class="keyword">import</span> buildNetwork</div><div class="line"><span class="keyword">from</span> pybrain.supervised.trainers <span class="keyword">import</span> BackpropTrainer</div><div class="line"></div><div class="line">ds = SupervisedDataSet(<span class="number">3</span>,<span class="number">1</span>)</div><div class="line">ds.addSample((<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>),(<span class="number">0</span>))</div><div class="line">ds.addSample((<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">1</span>))</div><div class="line">ds.addSample((<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>),(<span class="number">1</span>))</div><div class="line">ds.addSample((<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">0</span>))</div><div class="line"></div><div class="line">net = buildNetwork(<span class="number">3</span>,<span class="number">3</span>,<span class="number">1</span>)</div><div class="line"></div><div class="line">trainer = BackpropTrainer(net,ds)</div><div class="line">trainer.train()</div><div class="line"></div><div class="line"><span class="keyword">for</span> input, target <span class="keyword">in</span> ds:</div><div class="line">    <span class="keyword">print</span> input, target, net.activate(input)</div></pre></td></tr></table></figure><h2 id="支持向量机SVM"><a href="#支持向量机SVM" class="headerlink" title="支持向量机SVM"></a>支持向量机<code>SVM</code></h2><ul><li><p>使用<br>参考：<a href="http://www.fuqingchuan.com/2014/03/222.html" target="_blank" rel="external">揭开机器学习的面纱：SVM 100行代码实现[Python版]</a></p></li><li><p>代码</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment">#coding=utf8</span></div><div class="line"><span class="keyword">import</span> sys;</div><div class="line"><span class="keyword">import</span> random;</div><div class="line"><span class="keyword">import</span> math;</div><div class="line">EPS = <span class="number">0.0000000001</span> <span class="comment"># 很小的数字，用于判断浮点数是否等于0</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span><span class="params">(filename, data, dim)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line"><span class="string">    输入数据格式: label\tindex1:value1\tindex2:value2\tindex3:value3..., 其中index是特征的编号, 从1开始</span></div><div class="line"><span class="string">    data的数据格式: [[label, sample],[label, sample], ...],  其中sample: [v0, v1, v2, v3, ..., v[dim]]</span></div><div class="line"><span class="string">    '''</span> </div><div class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> open(filename, <span class="string">'rt'</span>):</div><div class="line">        sample = [<span class="number">0.0</span> <span class="keyword">for</span> v <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>)]; </div><div class="line">        line = line.rstrip(<span class="string">"\r\n\t "</span>);</div><div class="line">        fields = line.split(<span class="string">"\t"</span>);</div><div class="line">        label = int(fields[<span class="number">0</span>]); <span class="comment"># LABEL取值: 1 or -1</span></div><div class="line">        sample[<span class="number">0</span>] = <span class="number">1.0</span>; <span class="comment">#sample第一个元素用于存x0特征, 默认置为1.0[方便把 WX+b =&gt; WX]</span></div><div class="line">        <span class="keyword">for</span> field <span class="keyword">in</span> fields[<span class="number">1</span>:]:</div><div class="line">            kv = field.split(<span class="string">":"</span>);</div><div class="line">            idx = int(kv[<span class="number">0</span>]); <span class="comment"># ensure idx &gt;= 1</span></div><div class="line">            val = float(kv[<span class="number">1</span>]);</div><div class="line">            sample[idx] = val;</div><div class="line">        data.append((label, sample));</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">svm_train</span><span class="params">(data4train, dim, W, iterations, lm, lr)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line"><span class="string">    目标函数: obj(&lt;X,y&gt;, W) = (对所有&lt;X,y&gt;SUM&#123;max&#123;0, 1 - W*X*y&#125;&#125;) + lm / 2 * ||W||^2, 即：hinge+L2</span></div><div class="line"><span class="string">    '''</span></div><div class="line">    X = [<span class="number">0.0</span> <span class="keyword">for</span> v <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>)]; <span class="comment"># &lt;sample, label&gt; =&gt; &lt;X, y&gt;</span></div><div class="line">    grad = [<span class="number">0.0</span> <span class="keyword">for</span> v <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>)]; <span class="comment"># 梯度</span></div><div class="line">    num_train = len(data4train);</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, iterations):</div><div class="line">        <span class="comment">#每次迭代随机选择一个训练样本</span></div><div class="line">        index = random.randint(<span class="number">0</span>, num_train - <span class="number">1</span>);</div><div class="line">        y = data4train[index][<span class="number">0</span>]; <span class="comment"># y其实就是label</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>):</div><div class="line">            X[j] = data4train[index][<span class="number">1</span>][j];<span class="comment"># sample的vj</span></div><div class="line"></div><div class="line">        <span class="comment">#计算梯度</span></div><div class="line">        <span class="comment">#for j in range(0, dim + 1):</span></div><div class="line">        <span class="comment">#grad = lm * W[j];</span></div><div class="line">        WX = <span class="number">0.0</span>;</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>):</div><div class="line">            WX += W[j] * X[j];</div><div class="line">        <span class="keyword">if</span> <span class="number">1</span> - WX *y &gt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>):</div><div class="line">                grad[j] = lm * W[j] - X[j] * y;</div><div class="line">        <span class="keyword">else</span>:  <span class="comment"># 1-WX *y &lt;= 0的时候，目标函数的前半部分恒等于0, 梯度也是0</span></div><div class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>):</div><div class="line">                grad[j] = lm * W[j] - <span class="number">0</span>;</div><div class="line"> </div><div class="line">        <span class="comment">#更新权重, lr是学习速率</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>):</div><div class="line">            W[j] = W[j] - lr * grad[j];</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">svm_predict</span><span class="params">(data4test, dim , W)</span>:</span></div><div class="line">    num_test = len(data4test);</div><div class="line">    num_correct = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, num_test):</div><div class="line">        target = data4test[i][<span class="number">0</span>]; <span class="comment">#即label</span></div><div class="line">        X = data4test[i][<span class="number">1</span>]; <span class="comment"># 即sample</span></div><div class="line">        sum = <span class="number">0.0</span>;</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>):</div><div class="line">            sum += X[j] * W[j];</div><div class="line">        predict = <span class="number">-1</span>;</div><div class="line">        <span class="comment">#print sum;</span></div><div class="line">        <span class="keyword">if</span> sum &gt; <span class="number">0</span>:  <span class="comment">#权值&gt;0，认为目标值为1</span></div><div class="line">            predict = <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> predict * target &gt; <span class="number">0</span>: <span class="comment">#预测值和目标值符号相同</span></div><div class="line">            num_correct += <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> num_correct * <span class="number">1.0</span> / num_test;</div><div class="line"> </div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    <span class="string">'''</span></div><div class="line"><span class="string">    主函数：设置参数=&gt;导入数据=&gt;训练=&gt;输出结果</span></div><div class="line"><span class="string">    '''</span></div><div class="line">    <span class="comment">#设置参数</span></div><div class="line">    epochs = <span class="number">100</span>;<span class="comment">#迭代轮数</span></div><div class="line">    iterations = <span class="number">10</span>;<span class="comment">#每一轮中梯度下降迭代次数, 这个其实可以和epochs合并为一个参数</span></div><div class="line">    data4train = []; <span class="comment">#训练集, 假设每个样本的特征数量都一样</span></div><div class="line">    data4test = []; <span class="comment">#测试集, 假设每个样本的特征数量都一样</span></div><div class="line">    lm = <span class="number">0.0001</span>; <span class="comment">#lambda, 对权值做正则化限制的权重</span></div><div class="line">    lr = <span class="number">0.01</span>;   <span class="comment">#lr, 是学习速率，用于调整训练收敛的速度</span></div><div class="line">    dim = <span class="number">1000</span>;<span class="comment">#dim, 特征的最大维度, 所有样本不同特征总数</span></div><div class="line">    W = [<span class="number">0.0</span> <span class="keyword">for</span> v <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>)]; <span class="comment">#权值</span></div><div class="line">    <span class="comment">#导入测试集&amp;训练集</span></div><div class="line">    load_data(<span class="string">"train.txt"</span>, data4train, dim);</div><div class="line">    load_data(<span class="string">"test.txt"</span>, data4test, dim);</div><div class="line">    <span class="comment">#训练, 实际迭代次数=epochs * iterations</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, epochs):</div><div class="line">        svm_train(data4train, dim, W, iterations, lm, lr);</div><div class="line">        accuracy = svm_predict(data4test, dim, W);</div><div class="line">        <span class="keyword">print</span> <span class="string">"epoch:%d\taccuracy:%f"</span>%(i, accuracy);</div><div class="line">    <span class="comment">#输出结果权值</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, dim + <span class="number">1</span>):</div><div class="line">        <span class="keyword">if</span> math.fabs(W[i]) &gt; EPS:</div><div class="line">            <span class="keyword">print</span> <span class="string">"%d\t%f"</span>%(i, W[i]);</div><div class="line">    sys.exit(<span class="number">0</span>);</div></pre></td></tr></table></figure><h2 id="有限元sfepy"><a href="#有限元sfepy" class="headerlink" title="有限元sfepy"></a>有限元<code>sfepy</code></h2><p>参考：<a href="http://yumuzi.github.io/2016/05/25/sfepy-install/">Ubuntu 14.04 安装 Python 有限元模块 sfepy</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">进入sfepy目录</div><div class="line">$ ./simple.py examples/diffusion/poisson_short_syntax.py</div><div class="line">$ ./postproc.py cylinder.vtk</div></pre></td></tr></table></figure><h2 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h2><p>参考：<a href="https://www.zhihu.com/question/20899988/answer/91660166" target="_blank" rel="external">如何入门 Python 爬虫？</a></p><ul><li>代码</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> urllib2 <span class="keyword">import</span> urlopen</div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"></div><div class="line">url = <span class="string">"http://www.xinhuanet.com/"</span></div><div class="line">html = urlopen(url)</div><div class="line"></div><div class="line">bsObj = BeautifulSoup(html, <span class="string">"html.parser"</span>)</div><div class="line">print(bsObj.title)</div></pre></td></tr></table></figure><ul><li><code>Scrapy</code> 框架: 参见 <a href="http://yumuzi.github.io/2016/06/22/spider/">用 Scrapy 实现的一个网络爬虫</a></li></ul><p><strong>持续更新……</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;读取和更改PDF文档标题&quot;&gt;&lt;a href=&quot;#读取和更改PDF文档标题&quot; class=&quot;headerlink&quot; title=&quot;读取和更改PDF文档标题&quot;&gt;&lt;/a&gt;读取和更改PDF文档标题&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;安装&lt;code&gt;python-pypdf&lt;/code&gt;&lt;br&gt;参考：&lt;a href=&quot;https://www.howinstall.co/en/ubuntu/trusty/python-pypdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How to install python-pypdf on Ubuntu 14.04 (Trusty Tahr)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get update&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install python-pypdf&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="python" scheme="https://yumuzi.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>pandoc 在 Ubuntu 中的安装与使用</title>
    <link href="https://yumuzi.github.io/ubuntu-pandoc/"/>
    <id>https://yumuzi.github.io/ubuntu-pandoc/</id>
    <published>2016-05-26T14:53:28.000Z</published>
    <updated>2016-06-29T11:09:05.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="http://www.yangzhiping.com/tech/pandoc.html" target="_blank" rel="external">Markdown写作进阶：Pandoc入门浅谈</a></li><li><a href="http://www.bagualu.net/wordpress/archives/5396" target="_blank" rel="external">用pandoc把markdown转化为pdf文档</a></li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li>参考上述文档</li></ul><h2 id="文件转换"><a href="#文件转换" class="headerlink" title="文件转换"></a>文件转换</h2><h3 id="markdown-转-docx"><a href="#markdown-转-docx" class="headerlink" title="markdown 转 docx"></a><code>markdown</code> 转 <code>docx</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pandoc 01-chapter2.markdown -o chapter2.docx -c Github.css</div></pre></td></tr></table></figure><h3 id="markdown-转-pdf"><a href="#markdown-转-pdf" class="headerlink" title="markdown 转 pdf"></a><code>markdown</code> 转 <code>pdf</code></h3><ul><li>首先，需要配置好<code>latex</code>环境</li><li>查看中文字体</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">fc</span>-list -f <span class="string">"%&#123;family&#125;\n"</span>  :lang=zh</div></pre></td></tr></table></figure><ul><li><code>pandoc</code>中的<code>pdf</code>模板</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pandoc -D latex &gt; template.latex</div></pre></td></tr></table></figure><ul><li>转换</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pandoc -f markdown -t latex -s -M mainfont:SimSun -M sansfont:SimSun -M monofont:SimHei --latex-engine=xelatex -o aa.pdf -M geometry:<span class="string">"top=1in,inner=1in,outer=1in,bottom=1in,headheight=3ex,headsep=2ex"</span> --template=./template.tex ubuntu_latex.md</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.yangzhiping.com/tech/pandoc.html&quot; ta
      
    
    </summary>
    
      <category term="技术" scheme="https://yumuzi.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="ubuntu" scheme="https://yumuzi.github.io/tags/ubuntu/"/>
    
      <category term="pandoc" scheme="https://yumuzi.github.io/tags/pandoc/"/>
    
  </entry>
  
  <entry>
    <title>LibSVM 在 Ubuntu 系统的安装与使用</title>
    <link href="https://yumuzi.github.io/ubuntu-libsvm/"/>
    <id>https://yumuzi.github.io/ubuntu-libsvm/</id>
    <published>2016-05-26T13:40:50.000Z</published>
    <updated>2016-06-29T11:03:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="http://www.xuebuyuan.com/1547606.html" target="_blank" rel="external">在 linux（ubuntu） 下 安装 LibSVM</a></li><li><a href="http://www.cnphp.info/use-libsvm-in-linux.html" target="_blank" rel="external">Linux下使用Libsvm</a></li></ul><h2 id="安装-gnuplot"><a href="#安装-gnuplot" class="headerlink" title="安装 gnuplot"></a>安装 gnuplot</h2><ul><li>下载源码：<a href="https://sourceforge.net/projects/gnuplot/files/gnuplot/4.6.6/" target="_blank" rel="external">gnuplot-4.6.6</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install libx11-dev</div></pre></td></tr></table></figure><ul><li>解压、编译和安装</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ tar xzvf gnuplot-4.6.6.tar.gz</div><div class="line">$ <span class="built_in">cd</span> gnuplot-4.6.6</div><div class="line">$ ./configure</div><div class="line">$ make</div><div class="line">$ sudo make install</div></pre></td></tr></table></figure><a id="more"></a><h2 id="安装-libsvm"><a href="#安装-libsvm" class="headerlink" title="安装 libsvm"></a>安装 libsvm</h2><ul><li>下载文件：<a href="http://www.csie.ntu.edu.tw/~cjlin/cgi-bin/libsvm.cgi?+http://www.csie.ntu.edu.tw/~cjlin/libsvm+tar.gz" target="_blank" rel="external">libsvm</a></li><li>下载完成后解压，我把libsvm文件夹放到了 /usr/bin 目录下，然后在tools文件夹下找到 easy.py 和 grid.py 两个文件。把其中 gnuplot 的路径设置好。注意gnuplot的pathname不是解压的那个目录，而是要用 which gnuplot 命令来找出。我安装完后gnuplot的路径是 /usr/local/bin/gnuplot</li><li>最后执行在libsvm的文件夹下执行make命令，在子目录python下执行make命令</li></ul><p><strong>至此libsvm安装完成～</strong></p><h2 id="使用-libsvm"><a href="#使用-libsvm" class="headerlink" title="使用 libsvm"></a>使用 libsvm</h2><ul><li>数据下载：<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/" target="_blank" rel="external">libsvm-data</a></li></ul><p><strong>进入到<code>libsvm/tools</code>目录</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ python easy.py ~/libsvm/examples/a1a ~/libsvm/examples/a1a.t</div></pre></td></tr></table></figure><p>前者为训练数据，后者为测试数据。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.xuebuyuan.com/1547606.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在 linux（ubuntu） 下 安装 LibSVM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cnphp.info/use-libsvm-in-linux.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Linux下使用Libsvm&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;安装-gnuplot&quot;&gt;&lt;a href=&quot;#安装-gnuplot&quot; class=&quot;headerlink&quot; title=&quot;安装 gnuplot&quot;&gt;&lt;/a&gt;安装 gnuplot&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;下载源码：&lt;a href=&quot;https://sourceforge.net/projects/gnuplot/files/gnuplot/4.6.6/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gnuplot-4.6.6&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install libx11-dev&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;解压、编译和安装&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ tar xzvf gnuplot-4.6.6.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; gnuplot-4.6.6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ ./configure&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ make&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo make install&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术" scheme="https://yumuzi.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="ubuntu" scheme="https://yumuzi.github.io/tags/ubuntu/"/>
    
      <category term="libsvm" scheme="https://yumuzi.github.io/tags/libsvm/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 14.04 安装 Python 有限元模块 sfepy</title>
    <link href="https://yumuzi.github.io/sfepy-install/"/>
    <id>https://yumuzi.github.io/sfepy-install/</id>
    <published>2016-05-25T14:49:01.000Z</published>
    <updated>2016-06-29T11:00:59.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="http://tianya4088.blogspot.com/2016/03/sfepy.html" target="_blank" rel="external">SfePy 安装</a></li><li><a href="http://installion.co.uk/ubuntu/trusty/universe/m/mayavi2/install/index.html" target="_blank" rel="external">How To Install mayavi2 On Ubuntu 14.04 Lts</a></li></ul><h2 id="软件源更新"><a href="#软件源更新" class="headerlink" title="软件源更新"></a>软件源更新</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update</div></pre></td></tr></table></figure><h2 id="安装依赖库"><a href="#安装依赖库" class="headerlink" title="安装依赖库"></a>安装依赖库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install libfreetype6-dev libpng-dev libumfpack5.6.2</div><div class="line">$ sudo apt-get install gfortran python-pip</div><div class="line">$ sudo pip install cython pyparsing scipy</div></pre></td></tr></table></figure><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install swig</div><div class="line">$ sudo apt-get install libsuitesparse-dev</div><div class="line">$ git <span class="built_in">clone</span> https://github.com/scikit-umfpack/scikit-umfpack.git</div><div class="line">$ <span class="built_in">cd</span> scikit-umfpack</div><div class="line">$ sudo apt-get install pandoc</div><div class="line">$ sudo python setup.py install</div></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install libhdf5-dev python-numexpr </div><div class="line">$ sudo pip install blosc sympy pymetis</div><div class="line">$ sudo apt-get install python-sparse python-tables</div></pre></td></tr></table></figure><ul><li>接下来安装前，需要增加新的软件源</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo gedit /etc/apt/sources.list</div></pre></td></tr></table></figure><p>将下面一条语句添加到文件末尾，并保存</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deb <span class="string">http:</span><span class="comment">//us.archive.ubuntu.com/ubuntu trusty main univers</span></div></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update</div><div class="line">$ sudo apt-get install mayavi2</div></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install ipython</div></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install python-matplotlib python-numpydoc sphinx3</div></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo pip install https://bitbucket.org/dalcinl/igakit/get/default.tar.gz</div></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo pip install numpy mpi4py</div></pre></td></tr></table></figure><ul><li>安装 <code>Petsc</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo python setup.py install</div><div class="line">$ sudo pip install petsc4py</div></pre></td></tr></table></figure><h2 id="安装-SfePy"><a href="#安装-SfePy" class="headerlink" title="安装 SfePy"></a>安装 SfePy</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> git://github.com/sfepy/sfepy.git</div><div class="line">$ <span class="built_in">cd</span> sfepy</div><div class="line">$ python setup.py build_ext --inplace</div><div class="line">$ python run_tests.py</div></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><ul><li>需要进入<code>sfepy</code>目录</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./simple.py examples/diffusion/poisson_short_syntax.py</div><div class="line">$ ./postproc.py cylinder.vtk</div></pre></td></tr></table></figure><p>运行命令之后就可以看到后处理界面。</p><p><strong>安装过程到此结束～</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://tianya4088.blogspot.com/2016/03/sfepy.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SfePy 安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://installion.co.uk/ubuntu/trusty/universe/m/mayavi2/install/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How To Install mayavi2 On Ubuntu 14.04 Lts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;软件源更新&quot;&gt;&lt;a href=&quot;#软件源更新&quot; class=&quot;headerlink&quot; title=&quot;软件源更新&quot;&gt;&lt;/a&gt;软件源更新&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get update&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;安装依赖库&quot;&gt;&lt;a href=&quot;#安装依赖库&quot; class=&quot;headerlink&quot; title=&quot;安装依赖库&quot;&gt;&lt;/a&gt;安装依赖库&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install libfreetype6-dev libpng-dev libumfpack5.6.2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install gfortran python-pip&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo pip install cython pyparsing scipy&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="python" scheme="https://yumuzi.github.io/tags/python/"/>
    
      <category term="ubuntu" scheme="https://yumuzi.github.io/tags/ubuntu/"/>
    
      <category term="sfepy" scheme="https://yumuzi.github.io/tags/sfepy/"/>
    
  </entry>
  
  <entry>
    <title>网络编程学习之路</title>
    <link href="https://yumuzi.github.io/web-programming/"/>
    <id>https://yumuzi.github.io/web-programming/</id>
    <published>2016-05-23T05:18:44.000Z</published>
    <updated>2016-06-29T11:07:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><ul><li>问题：使用 Navicat 将 Excel 文件导入 mysql 数据库，中文乱码<br>解决办法：将数据库和数据表都设置为 <code>utf8</code> 编码，两者缺一不可！<br>数据表的<code>sql</code>语法如下：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`TABLE_NAME`</span> (</div><div class="line">......</div><div class="line">......</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div></pre></td></tr></table></figure><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQL&quot;&gt;&lt;a href=&quot;#MySQL&quot; class=&quot;headerlink&quot; title=&quot;MySQL&quot;&gt;&lt;/a&gt;MySQL&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;问题：使用 Navicat 将 Excel 文件导入 mysql 数据库，中文乱码&lt;br&gt;解决办法：将数据库和数据表都设置为 &lt;code&gt;utf8&lt;/code&gt; 编码，两者缺一不可！&lt;br&gt;数据表的&lt;code&gt;sql&lt;/code&gt;语法如下：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;`TABLE_NAME`&lt;/span&gt; (&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;......&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;......&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;) &lt;span class=&quot;keyword&quot;&gt;ENGINE&lt;/span&gt;=&lt;span class=&quot;keyword&quot;&gt;InnoDB&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;CHARSET&lt;/span&gt;=utf8;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="mysql" scheme="https://yumuzi.github.io/tags/mysql/"/>
    
      <category term="programming" scheme="https://yumuzi.github.io/tags/programming/"/>
    
      <category term="php" scheme="https://yumuzi.github.io/tags/php/"/>
    
      <category term="html" scheme="https://yumuzi.github.io/tags/html/"/>
    
      <category term="css" scheme="https://yumuzi.github.io/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu + Python 学习之路</title>
    <link href="https://yumuzi.github.io/Ubuntu-python/"/>
    <id>https://yumuzi.github.io/Ubuntu-python/</id>
    <published>2016-05-23T03:38:36.000Z</published>
    <updated>2016-06-29T11:04:26.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="python-库"><a href="#python-库" class="headerlink" title="python 库"></a>python 库</h2><ul><li>pip3</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install python3-pip</div></pre></td></tr></table></figure><ul><li>numpy, scipy, matplotlib (for python)</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install python-numpy</div><div class="line">$ sudo apt-get install python-scipy</div><div class="line">$ sudo apt-get install python-matplotlib</div></pre></td></tr></table></figure><ul><li>numpy, scipy, matplot lib (for python3)</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ sudo pip3 install numpy</div><div class="line">$ sudo apt-get install libfreetype6-dev libxft-dev</div><div class="line">$ sudo pip3 install matplotlib</div><div class="line">$ sudo apt-get install python3-scipy</div></pre></td></tr></table></figure><a id="more"></a><h2 id="python文件打包exe文件：pyinstaller"><a href="#python文件打包exe文件：pyinstaller" class="headerlink" title="python文件打包exe文件：pyinstaller"></a>python文件打包exe文件：<code>pyinstaller</code></h2><p>参考：<a href="http://blog.sina.com.cn/s/blog_af6fe5860102vnt0.html" target="_blank" rel="external">关于Linux(Ubuntu)安装使用pyinstaller</a></p><ul><li>安装</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install pyinstaller</div></pre></td></tr></table></figure><ul><li>使用</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> ~/PyTest</div><div class="line">$ pyinstaller test.py</div></pre></td></tr></table></figure><h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><ul><li>安装 <code>mysql</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install mysql-server mysql-client</div></pre></td></tr></table></figure><ul><li>安装 <code>mysql-python</code> 模块</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install python-setuptools</div><div class="line">$ sudo apt-get install libmysqld-dev</div><div class="line">$ sudo apt-get install libmysqlclient-dev</div><div class="line">$ sudo apt-get install python-dev</div><div class="line">$ sudo easy_install mysql-python</div></pre></td></tr></table></figure><h2 id="pure-css"><a href="#pure-css" class="headerlink" title="pure.css"></a>pure.css</h2><ul><li>安装<br>参考：<a href="https://github.com/yahoo/pure/" target="_blank" rel="external">yahoo/pure</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install purecss</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;python-库&quot;&gt;&lt;a href=&quot;#python-库&quot; class=&quot;headerlink&quot; title=&quot;python 库&quot;&gt;&lt;/a&gt;python 库&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;pip3&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install python3-pip&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;numpy, scipy, matplotlib (for python)&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install python-numpy&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install python-scipy&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install python-matplotlib&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;numpy, scipy, matplot lib (for python3)&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo pip3 install numpy&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install libfreetype6-dev libxft-dev&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo pip3 install matplotlib&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install python3-scipy&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="python" scheme="https://yumuzi.github.io/tags/python/"/>
    
      <category term="ubuntu" scheme="https://yumuzi.github.io/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>LaTeX-Beamer 学习之路</title>
    <link href="https://yumuzi.github.io/beamer-tutor/"/>
    <id>https://yumuzi.github.io/beamer-tutor/</id>
    <published>2016-05-12T13:27:40.000Z</published>
    <updated>2016-06-29T10:54:17.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><ul><li><a href="https://github.com/yumuzi/Beamer" target="_blank" rel="external">很好用的模板</a></li></ul><h2 id="加载宏包"><a href="#加载宏包" class="headerlink" title="加载宏包"></a>加载宏包</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;ragged2e&#125;</span></span><span class="comment">% 设置段落对齐方式宏包</span></div></pre></td></tr></table></figure><a id="more"></a><h2 id="全局设置"><a href="#全局设置" class="headerlink" title="全局设置"></a>全局设置</h2><ul><li>指定存储图片的路径（当前目录下的figures文件夹）</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">graphicspath</span><span class="string">&#123;&#123;figures/&#125;</span></span>&#125;</div></pre></td></tr></table></figure><ul><li>PDF文件打开即全屏显示</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">hypersetup</span><span class="string">&#123;pdfpagemode=FullScreen&#125;</span></span></div></pre></td></tr></table></figure><ul><li>在表格、图片等标题中显示编号</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">setbeamertemplate</span><span class="string">&#123;caption&#125;</span><span class="string">[numbered]</span></span></div></pre></td></tr></table></figure><ul><li>设置段落两端对齐</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">justifying</span></span></div><div class="line"><span class="tag">\<span class="name">let</span></span><span class="tag">\<span class="name">raggedright</span></span><span class="tag">\<span class="name">justifying</span></span></div></pre></td></tr></table></figure><ul><li>修改图表名格式</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">setbeamertemplate</span><span class="string">&#123;caption label separator&#125;</span><span class="string">&#123;. &#125;</span></span></div><div class="line"><span class="tag">\<span class="name">renewcommand</span><span class="string">&#123;\figurename&#125;</span><span class="string">&#123;Figure&#125;</span></span></div><div class="line"><span class="tag">\<span class="name">renewcommand</span><span class="string">&#123;\tablename&#125;</span><span class="string">&#123;Table&#125;</span></span></div></pre></td></tr></table></figure><ul><li>设置图表标题大小</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">setbeamerfont</span><span class="string">&#123;caption&#125;</span><span class="string">&#123;size=\footnotesize&#125;</span></span></div></pre></td></tr></table></figure><p><em>持续更新…</em></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;模板&quot;&gt;&lt;a href=&quot;#模板&quot; class=&quot;headerlink&quot; title=&quot;模板&quot;&gt;&lt;/a&gt;模板&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yumuzi/Beamer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;很好用的模板&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;加载宏包&quot;&gt;&lt;a href=&quot;#加载宏包&quot; class=&quot;headerlink&quot; title=&quot;加载宏包&quot;&gt;&lt;/a&gt;加载宏包&lt;/h2&gt;&lt;figure class=&quot;highlight tex&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;usepackage&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;ragged2e&amp;#125;&lt;/span&gt;&lt;/span&gt;	&lt;span class=&quot;comment&quot;&gt;% 设置段落对齐方式宏包&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="学术" scheme="https://yumuzi.github.io/categories/%E5%AD%A6%E6%9C%AF/"/>
    
    
      <category term="latex" scheme="https://yumuzi.github.io/tags/latex/"/>
    
      <category term="beamer" scheme="https://yumuzi.github.io/tags/beamer/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 安装和配置 oh-my-zsh</title>
    <link href="https://yumuzi.github.io/oh-my-zsh-install/"/>
    <id>https://yumuzi.github.io/oh-my-zsh-install/</id>
    <published>2016-05-08T13:35:19.000Z</published>
    <updated>2016-09-23T14:53:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参考文档："><a href="#参考文档：" class="headerlink" title="参考文档："></a>参考文档：</h2><ul><li><a href="https://github.com/robbyrussell/oh-my-zsh/issues/1984" target="_blank" rel="external">unable to upgrade #1984</a></li></ul><h2 id="要安装-zsh，首先需要安装-git-和-curl"><a href="#要安装-zsh，首先需要安装-git-和-curl" class="headerlink" title="要安装 zsh，首先需要安装 git 和 curl"></a>要安装 <code>zsh</code>，首先需要安装 <code>git</code> 和 <code>curl</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install git</div><div class="line">$ sudo apt-get install git-core</div><div class="line">$ sudo apt-get install curl</div><div class="line"></div><div class="line">$ git --version</div><div class="line">$ curl --version</div></pre></td></tr></table></figure><a id="more"></a><h2 id="安装-zsh"><a href="#安装-zsh" class="headerlink" title="安装 zsh"></a>安装 <code>zsh</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install zsh</div><div class="line">$ zsh --version</div></pre></td></tr></table></figure><h2 id="设置zsh-为你的默认-shell"><a href="#设置zsh-为你的默认-shell" class="headerlink" title="设置zsh 为你的默认 shell"></a>设置<code>zsh</code> 为你的默认 <code>shell</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ chsh -s $(<span class="built_in">which</span> zsh)</div></pre></td></tr></table></figure><h2 id="安装-oh-my-zsh"><a href="#安装-oh-my-zsh" class="headerlink" title="安装 oh my zsh"></a>安装 <code>oh my zsh</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></div></pre></td></tr></table></figure><h2 id="更新-oh-my-zsh"><a href="#更新-oh-my-zsh" class="headerlink" title="更新 oh my zsh"></a>更新 <code>oh my zsh</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ upgrade_oh_my_zsh</div></pre></td></tr></table></figure><h3 id="遇到问题"><a href="#遇到问题" class="headerlink" title="遇到问题"></a>遇到问题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[Oh My Zsh] Would you like to check <span class="keyword">for</span> updates?</div><div class="line">Type Y to update oh-my-zsh: Y</div><div class="line">Upgrading Oh My Zsh</div><div class="line">Cannot pull with rebase: You have unstaged changes.</div><div class="line">Please commit or stash them.</div><div class="line">There was an error updating. Try again later?</div></pre></td></tr></table></figure><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><ul><li>Open up Terminal</li><li>Type in ‘~/.oh-my-zsh’, this should change your directory to the zsh directory.<br>-Terminal should read: “ .oh-my-zsh git:(master) “. If it does, go to step 3.</li><li>Type in “git status” to see that your status is ahead of master.<br>-If you’re not concerned about the file status changes, you can “stash” those changes by doing step 4.</li><li>Type in “git stash” to save the progress in the git and move the head back to master.</li><li>Done. Now you should be able to upgrade the next time the terminal asks you too.</li></ul><h2 id="更改主题"><a href="#更改主题" class="headerlink" title="更改主题"></a>更改主题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim ./zshrc</div></pre></td></tr></table></figure><p>修改为你想要的主题即可，我采用的是 <code>ZSH_THEME=&quot;wezm&quot;</code></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;参考文档：&quot;&gt;&lt;a href=&quot;#参考文档：&quot; class=&quot;headerlink&quot; title=&quot;参考文档：&quot;&gt;&lt;/a&gt;参考文档：&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh/issues/1984&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;unable to upgrade #1984&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;要安装-zsh，首先需要安装-git-和-curl&quot;&gt;&lt;a href=&quot;#要安装-zsh，首先需要安装-git-和-curl&quot; class=&quot;headerlink&quot; title=&quot;要安装 zsh，首先需要安装 git 和 curl&quot;&gt;&lt;/a&gt;要安装 &lt;code&gt;zsh&lt;/code&gt;，首先需要安装 &lt;code&gt;git&lt;/code&gt; 和 &lt;code&gt;curl&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install git&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install git-core&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install curl&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ git --version&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ curl --version&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术" scheme="https://yumuzi.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="ubuntu" scheme="https://yumuzi.github.io/tags/ubuntu/"/>
    
      <category term="zsh" scheme="https://yumuzi.github.io/tags/zsh/"/>
    
      <category term="oh-my-zsh" scheme="https://yumuzi.github.io/tags/oh-my-zsh/"/>
    
  </entry>
  
  <entry>
    <title>读书笔记</title>
    <link href="https://yumuzi.github.io/book-logs/"/>
    <id>https://yumuzi.github.io/book-logs/</id>
    <published>2016-05-08T09:15:14.000Z</published>
    <updated>2016-06-29T10:54:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>谨在此记录一下自己在读书过程中看到的一些美词佳句和受到的感动……</p><h2 id="《JLH》"><a href="#《JLH》" class="headerlink" title="《JLH》"></a>《JLH》</h2><p>作者：QBY</p><ul><li>《桃花扇》续四十出《余韵》，清代孔尚任<br>眼看他起朱楼，眼看他认宾客，眼看他楼塌了。这青苔碧瓦堆。俺曾睡风流觉，将五十年兴亡看饱。</li></ul><a id="more"></a><ul><li><p>《省试湘灵鼓瑟》，唐代钱起<br>流水传潇浦，悲风过洞庭。曲风人不见，江上数峰青。</p></li><li><p>“古艳歌”，汉乐府<br>莹莹白兔，东走西顾，衣不如新，人不如故。</p></li><li><p>《赠卫八处士》，杜甫<br>人生不相见，动如参与商。今夕复何夕，共此灯烛光。<br>少壮能几时，鬓发各已苍。访旧半为鬼，惊呼热中肠。<br>焉知二十载，重上君子堂。昔别君未婚，儿女忽成行。<br>怡然敬父执，问我来何方。问答乃未已，儿女罗酒浆。<br>夜雨剪春韭，新炊间黄粱。主称会面难，一举累十觞。<br>十觞亦不醉，感子故意长。明日隔山岳，世事两茫茫。</p></li><li><p>《水龙吟.次韵章知府杨花词》，苏轼<br>似花还似非花，也无人惜从教坠。抛家傍路，思量却是，无情有思。萦损柔肠，困酣娇眼，欲开还闭。梦随风万里，寻郎去处，又还被莺呼起。<br>不恨此花飞尽，恨西园，落红难缀。晓来雨过，遗踪何在？一池萍碎。春色三分，二分尘土，一分流水。细看来，不是杨花，点点是离人泪。</p></li><li><p>《国史大纲》，钱穆<br>“对其本国历史略有所知者，尤必附随一种对其本国以往历史之温情与敬意。”</p></li><li><p>智勇纯真，文质彬彬。</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;谨在此记录一下自己在读书过程中看到的一些美词佳句和受到的感动……&lt;/p&gt;
&lt;h2 id=&quot;《JLH》&quot;&gt;&lt;a href=&quot;#《JLH》&quot; class=&quot;headerlink&quot; title=&quot;《JLH》&quot;&gt;&lt;/a&gt;《JLH》&lt;/h2&gt;&lt;p&gt;作者：QBY&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;《桃花扇》续四十出《余韵》，清代孔尚任&lt;br&gt;眼看他起朱楼，眼看他认宾客，眼看他楼塌了。这青苔碧瓦堆。俺曾睡风流觉，将五十年兴亡看饱。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="读书" scheme="https://yumuzi.github.io/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
      <category term="book" scheme="https://yumuzi.github.io/tags/book/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 中 Vim 使用的点滴记录</title>
    <link href="https://yumuzi.github.io/vim-tutor/"/>
    <id>https://yumuzi.github.io/vim-tutor/</id>
    <published>2016-05-07T09:26:29.000Z</published>
    <updated>2016-06-29T11:06:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>本文是个人在<code>vim</code>使用过程中的点滴记录，与广大<code>vim</code>使用者所共享。</p><h2 id="Ubuntu-安装-spf13"><a href="#Ubuntu-安装-spf13" class="headerlink" title="Ubuntu 安装 spf13"></a>Ubuntu 安装 spf13</h2><p>这里在Ubuntu系统下进行安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install vim</div><div class="line">$ sudo apt-get install vim-nox             <span class="comment"># 注意必须安装此项，否则自动不全插件无法运行</span></div><div class="line">$ curl https://j.mp/spf13-vim3 -L -o | sh</div></pre></td></tr></table></figure><p>ok，等待安装完成即可，可能需要花费比较久的时间。</p><a id="more"></a><h2 id="VIM-常用命令"><a href="#VIM-常用命令" class="headerlink" title="VIM 常用命令"></a>VIM 常用命令</h2><ul><li><code>x</code>: 删除字符</li><li><code>a</code>: 在光标后插入字符</li><li><code>A</code>: 在行末插入字符</li><li><code>i</code>: 进入插入模式</li><li><code>:wq</code>: 保存并退出</li><li><code>dw</code>: 删除单词</li><li><code>d$</code>: 从光标处删除字符至行末</li><li><code>2w</code>: 将光标向后移动 2 个单词</li><li><code>3e</code>: 将光标移动至第三个单词末尾</li><li><code>d2w</code>: 删除 2 个单词</li><li><code>dd</code>: 删除整行文本</li><li><code>2dd</code>: 删除 2 行文本</li><li><code>u</code>: 撤销最后执行的命令</li><li><code>U</code>: 撤销对整行所做的修改</li><li><code>CTRL-R</code>: 重做被撤销的命令</li><li><code>p</code>: 配合 <code>dd</code> 将最后一次删除的命令重新置入</li><li><code>r</code>: 替换单个字符</li><li><code>cw</code>: 修改单词</li><li><code>c$</code>: 更正文本至行末</li><li><code>CTRL-G</code>: 显示光标所在行号</li><li><code>G</code>: 跳转到最后一行</li><li><code>gg</code>: 跳转至首行</li><li><code>504G</code>: 跳转到指定行数</li><li><code>/words</code>: 查找某项，n为向下寻找，N为向上寻找</li><li><code>CTRL-O</code>: 回到查找之前的位置</li><li><code>CTRL-I</code>: 回到较新的位置</li><li><code>%</code>: 查看配对的括号，再输入 % 返回</li><li><code>:s/old/new</code>: 更改所在行第一个匹配项</li><li><code>:s/old/new/g</code>: 更改该行所有匹配项</li><li><code>:#,#s/old/new/g</code>: 更改指定行号之间的匹配项</li><li><code>:%s/old/new/g</code>: 更改全文的匹配项</li><li><code>%s/old/new/gc</code>: 更改全文的匹配项</li><li><code>!ls</code>: 查看文件夹下有那些文件</li><li><code>!rm filename</code>: 删除文件</li><li><code>:w filename</code>: 保存文件</li><li><code>v</code>: 进入可视模式选取文本，以便于后续操作</li><li><code>:r filename</code>: 将其他文件中的内容插入到光标之后</li><li><code>e</code>: 逐单词向后移动</li><li><code>o</code>: 光标之后新增一行</li><li><code>O</code>: 光标之前新增一行</li><li><code>R</code>: 替换多字符文本</li><li><code>y</code>: 复制文本</li><li><code>:set ic</code>: 查询时设置“忽略大小写”</li><li><code>:set noic</code>: 查询时“禁止忽略大小写”</li><li><code>:set hls is</code>: 查询时设置查询到的文本高亮</li><li><code>:set nohlsearch</code>: 取消查询高亮</li><li><code>:help</code>: 帮助</li><li><code>CTRL-W</code>: 窗口之间跳转</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文是个人在&lt;code&gt;vim&lt;/code&gt;使用过程中的点滴记录，与广大&lt;code&gt;vim&lt;/code&gt;使用者所共享。&lt;/p&gt;
&lt;h2 id=&quot;Ubuntu-安装-spf13&quot;&gt;&lt;a href=&quot;#Ubuntu-安装-spf13&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu 安装 spf13&quot;&gt;&lt;/a&gt;Ubuntu 安装 spf13&lt;/h2&gt;&lt;p&gt;这里在Ubuntu系统下进行安装。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install vim&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo apt-get install vim-nox             &lt;span class=&quot;comment&quot;&gt;# 注意必须安装此项，否则自动不全插件无法运行&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ curl https://j.mp/spf13-vim3 -L -o | sh&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ok，等待安装完成即可，可能需要花费比较久的时间。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://yumuzi.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="ubuntu" scheme="https://yumuzi.github.io/tags/ubuntu/"/>
    
      <category term="vim" scheme="https://yumuzi.github.io/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>一个读取文件夹内所有PDF文件标题的python小程序</title>
    <link href="https://yumuzi.github.io/pyPdf/"/>
    <id>https://yumuzi.github.io/pyPdf/</id>
    <published>2016-05-05T14:17:13.000Z</published>
    <updated>2016-06-29T11:00:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>一个读取文件夹内所有PDF文件标题的python小程序。<br>详情见:</p><ul><li><a href="https://github.com/yumuzi/pyPDFTitle" target="_blank" rel="external">pyPDFTitle</a></li><li><a href="https://github.com/yumuzi/PyPDF2" target="_blank" rel="external">PyPDF2</a></li><li><a href="https://github.com/yumuzi/pyPdf" target="_blank" rel="external">pyPdf3</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;一个读取文件夹内所有PDF文件标题的python小程序。&lt;br&gt;详情见:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yumuzi/pyPDFTitle&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pyPDFTitl
      
    
    </summary>
    
      <category term="编程" scheme="https://yumuzi.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="python" scheme="https://yumuzi.github.io/tags/python/"/>
    
  </entry>
  
</feed>
